
ะัะปะธัะฝัะน ะฒะพะฟัะพั! โจ

---

## ๐งฉ ะงัะพ ัะฐะบะพะต **ะฑัะพะบะตั** ะฒ Apache Kafka?

**ะัะพะบะตั (broker)** โ ััะพ **ะพัะดะตะปัะฝัะน ัะตัะฒะตั**, ะบะพัะพััะน:

- ะฟัะธะฝะธะผะฐะตั ัะพะพะฑัะตะฝะธั ะพั **producers**,
- ัะพััะฐะฝัะตั ะธั ะฒ ะฝัะถะฝัะต **ัะพะฟะธะบะธ** (ะธ ะฟะฐััะธัะธะธ),
- ะพัะดะฐัั ะธั **consumers** ะฟะพ ะทะฐะฟัะพัั.

๐ฆ ะะพะถะฝะพ ะฟัะตะดััะฐะฒะธัั Kafka-ะฑัะพะบะตั ะบะฐะบ **ะฟะพััะพะฒะพะต ะพัะดะตะปะตะฝะธะต**:

- ะัะพะธะทะฒะพะดะธัะตะปั (producer) ะพัะฟัะฐะฒะปัะตั ยซะฟะธััะผะพยป (ัะพะพะฑัะตะฝะธะต);
- Kafka-ะฑัะพะบะตั ัะพััะธััะตั, ััะฐะฝะธั ะธ ะฒัะดะฐะตั ยซะฟะธััะผะฐยป ะฟะพะดะฟะธััะธะบะฐะผ (consumers).

---

## ๐๏ธ ะัะฝะพะฒะฝัะต ััะฝะบัะธะธ ะฑัะพะบะตัะฐ:

| ะะพะทะผะพะถะฝะพััั        | ะะฟะธัะฐะฝะธะต                                               |
|--------------------|--------------------------------------------------------|
| ๐ฅ ะัะธัะผ ัะพะพะฑัะตะฝะธะน | ะะพะปััะฐะตั ะดะฐะฝะฝัะต ะพั Producer'ะพะฒ                         |
| ๐พ ะฅัะฐะฝะตะฝะธะต        | ะกะพััะฐะฝัะตั ะฒ ัะฐะนะปั (segmented logs) ะฝะฐ ะดะธัะบ             |
| ๐ค ะัะดะฐัะฐ          | ะะฐะทะดะฐัั ะดะฐะฝะฝัะต Consumers ะฟะพ ะธั ะพัััะตัั                 |
| ๐ก ะะตะฟะปะธะบะฐัะธั      | ะะฐัััะปะฐะตั ะบะพะฟะธะธ ะดััะณะธะผ ะฑัะพะบะตัะฐะผ ะดะปั ะพัะบะฐะทะพัััะพะนัะธะฒะพััะธ |
| ๐ ะะตัะฐะดะฐะฝะฝัะต      | ะฅัะฐะฝะธั ะธะฝัะพัะผะฐัะธั ะพ ัะพะฟะธะบะฐั, ะฟะฐััะธัะธัั ะธ ะบะปะฐััะตัะต      |

---

## ๐ง ะัะพะบะตั โ Kafka ัะตะปะธะบะพะผ

> Kafka โ ััะพ **ะบะปะฐััะตั ะฑัะพะบะตัะพะฒ** (ะพะฑััะฝะพ 3+ ัััะบ), ะฐ ะฝะต ะพะดะธะฝ ัะตัะฒะตั.

ะะฐะถะดัะน ะฑัะพะบะตั ะธะผะตะตั ัะฒะพะน **ID** (ะฝะฐะฟัะธะผะตั, `broker.id=1`) ะธ ัะฟัะฐะฒะปัะตั **ะฝะฐะฑะพัะพะผ
ะฟะฐััะธัะธะน**.

---

## ๐ ะัะธะผะตั: ะบะปะฐััะตั ะธะท 3 ะฑัะพะบะตัะพะฒ

```
Kafka Cluster:
 โโโโโโโโโโโโ  โโโโโโโโโโโโ  โโโโโโโโโโโโ
 โ Broker 1 โ  โ Broker 2 โ  โ Broker 3 โ
 โโโโโโโโโโโโ  โโโโโโโโโโโโ  โโโโโโโโโโโโ
      โฒ             โฒ             โฒ
    /   \         /   \         /   \
 Producers     Consumers     ZooKeeper (ะธะปะธ KRaft)
```

---

## ๐ ะัะธ ะฟะพะดะบะปััะตะฝะธะธ Producer/Consumer:

ะะฝะธ ัะบะฐะทัะฒะฐัั **ะพะดะธะฝ ะธะปะธ ะฝะตัะบะพะปัะบะพ ะฐะดัะตัะพะฒ ะฑัะพะบะตัะพะฒ** ะฒ ะฟะฐัะฐะผะตััะต:

```yaml
spring.kafka.bootstrap-servers: broker1:9092,broker2:9092
```

> Kafka ัะฐะผ ะฝะฐะนะดัั ะพััะฐะปัะฝัะต ะฑัะพะบะตัั ะฟะพ ะผะตัะฐะดะฐะฝะฝัะผ.

---

ะฅะพัะตัั ะฟัะธะผะตั, ะบะฐะบ ัะฟัะฐะฒะปััั ะฝะตัะบะพะปัะบะธะผะธ ะฑัะพะบะตัะฐะผะธ ะธะปะธ ะบะฐะบ ะฒัะณะปัะดะธั
ัะฐัะฟัะตะดะตะปะตะฝะธะต ะฟะฐััะธัะธะน ะผะตะถะดั ะฝะธะผะธ? ะะพะณั ะฝะฐัะธัะพะฒะฐัั ะธะปะธ ะฟะพะบะฐะทะฐัั ะฒ ะบะพะดะต ๐
------------
ะบะฐะบ ะฒัะณะปัะดะธั ัะฐัะฟัะตะดะตะปะตะฝะธะต ะฟะฐััะธัะธะน ะผะตะถะดั ะฝะธะผะธ?

ะัะปะธัะฝัะน ะฒะพะฟัะพั! ๐ก ะะฐะฒะฐะน ัะฐะทะฑะตััะผ, ะบะฐะบ **Kafka ัะฐัะฟัะตะดะตะปัะตั ะฟะฐััะธัะธะธ ะผะตะถะดั
ะฑัะพะบะตัะฐะผะธ**.

---

## ๐งฉ ะงัะพ ัะฐะบะพะต **ะฟะฐััะธัะธะธ**?

ะะฐััะธัะธะธ โ ััะพ **ะฟะพะดัะฐะทะดะตะปะตะฝะธั ัะพะฟะธะบะฐ**, ะบะพัะพััะต ะฟะพะทะฒะพะปััั:

- ๐ ะผะฐัััะฐะฑะธัะพะฒะฐัั Kafka ะณะพัะธะทะพะฝัะฐะปัะฝะพ,
- โก๏ธ ะพะฑัะฐะฑะฐััะฒะฐัั ัะพะพะฑัะตะฝะธั ะฟะฐัะฐะปะปะตะปัะฝะพ,
- ๐ก ัะพััะฐะฝััั ะพัะบะฐะทะพัััะพะนัะธะฒะพััั (ัะตัะตะท **ัะตะฟะปะธะบะธ**).

---

## ๐ ะะฐะบ Kafka ัะฐัะฟัะตะดะตะปัะตั ะฟะฐััะธัะธะธ ะฟะพ ะฑัะพะบะตัะฐะผ?

ะะพะฟัััะธะผ, ั ะฝะฐั ะตััั:

- **3 ะฑัะพะบะตัะฐ**: `B1`, `B2`, `B3`
- **1 ัะพะฟะธะบ**: `orders`
- ะญัะพั ัะพะฟะธะบ ะธะผะตะตั **6 ะฟะฐััะธัะธะน**, ั **ัะตะฟะปะธะบะฐัะธะตะน = 2**

Kafka ัะฐัะฟัะตะดะตะปะธั ะธั ะฟัะธะผะตัะฝะพ ัะฐะบ:

| Partition | Leader | Replicas |
|-----------|--------|----------|
| orders-0  | B1     | B1, B2   |
| orders-1  | B2     | B2, B3   |
| orders-2  | B3     | B3, B1   |
| orders-3  | B1     | B1, B3   |
| orders-4  | B2     | B2, B1   |
| orders-5  | B3     | B3, B2   |

---

### ๐ ะะพััะฝะตะฝะธั:

- **Leader** โ ะฑัะพะบะตั, ะบะพัะพััะน ะพะฑัะปัะถะธะฒะฐะตั ััั ะฟะฐััะธัะธั (ัะธัะฐะตั/ะฟะธัะตั);
- **Replicas** โ ัะฟะธัะพะบ ะฑัะพะบะตัะพะฒ, ะณะดะต ััะฐะฝัััั ะบะพะฟะธะธ (ะดะปั ะพัะบะฐะทะพัััะพะนัะธะฒะพััะธ);
- Kafka ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฑะฐะปะฐะฝัะธััะตั ะธั (ั ััััะพะผ ัะฐะฒะฝะพะผะตัะฝะพะน ะฝะฐะณััะทะบะธ).

---

## ๐ ะัะฐัะธัะตัะบะฐั ััะตะผะฐ:

```
       Kafka Cluster (3 ะฑัะพะบะตัะฐ)
โโโโโโโโโโโโฌโโโโโโโโโโโฌโโโโโโโโโโโ
โ Broker 1 โ Broker 2 โ Broker 3 โ
โโโโโโโโโโโโผโโโโโโโโโโโผโโโโโโโโโโโค
โ 0L, 2R   โ 1L, 0R   โ 2L, 1R   โ
โ 3L, 4R   โ 4L, 5R   โ 5L, 3R   โ
โโโโโโโโโโโโดโโโโโโโโโโโดโโโโโโโโโโโ
L = Leader, R = Replica
```

---

## ๐งช ะัะธะผะตั ะธะท ะบะพะผะฐะฝะดั:

ะฅะพัะตัั ะฟะพัะผะพััะตัั ัะฐัะฟัะตะดะตะปะตะฝะธะต ะฟะฐััะธัะธะน ะฒ ัะฒะพะตะน Kafka? ะัะฟะพะปัะทัะน CLI:

```bash
kafka-topics.sh --describe --bootstrap-server localhost:9092 --topic orders
```

ะัะฒะตะดะตั:

```
Topic: orders  Partition: 0  Leader: 1  Replicas: 1,2  ISR: 1,2
Topic: orders  Partition: 1  Leader: 2  Replicas: 2,3  ISR: 2,3
...
```

---

## ๐ฌ ะฅะพัะตัั:

- ะัะธะผะตั ะฐะฒัะพัะพะทะดะฐะฝะธั ัะพะฟะธะบะฐ ั ะฝัะถะฝัะผ ัะธัะปะพะผ ะฟะฐััะธัะธะน?
- ะะฐะบ ะฒัะฑัะฐัั ะฟะฐััะธัะธั ะฟัะพะณัะฐะผะผะฝะพ (ะฟะพ ะบะปััั, ะฟะพ ัััั, ะฒัััะฝัั)?
- ะะปะธ ัะธะผัะปััะธั ะพัะบะฐะทะฐ ะพะดะฝะพะณะพ ะธะท ะฑัะพะบะตัะพะฒ?

ะกะฟัะพัะธ โ ะฟะพะบะฐะถั! ๐ง
