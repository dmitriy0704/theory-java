# Состояние (State)

- это поведенческий паттерн проектирования,
  который позволяет объектам менять поведение в
  зависимости от своего состояния. Извне создаётся
  впечатление, что изменился классобъекта.

Поведения, зависящие от состояния, переезжают в отдельные классы. Первоначальный
класс хранит ссылку на один из таких объектов-состояний и делегирует ему работу.

Применимость: Паттерн Состояние часто используют в Java для превращения в
объекты громоздких стейт-машин, построенных на операторах switch.

Примеры Состояния в стандартных библиотеках Java:

javax.faces.lifecycle.LifeCycle#execute() (контролируемый из FacesServlet:
поведение зависит от текущей фазы (состояния) JSF)
Признаки применения паттерна: Методы класса делегируют работу одному вложенному
объекту.

## Структура

![state_structure.png](/img/design_pattern/design_patterns/state_structure.png)

1. Контекст хранит ссылку на объект состояния и делегирует
   ему часть работы, зависящей от состояний. Контекст рабо-
   тает с этим объектом через общий интерфейс состояний.
   Контекстдолжениметьметоддляприсваиванияемунового
   объекта-состояния.
2. Состояние описывает общий интерфейс для всех конкрет-
   ныхсостояний.
3. Конкретные состояния реализуют поведения, связанные с
   определённым состоянием контекста. Иногда приходится создавать целые иерархии
   классов состояний, чтобы обоб-
   щить дублирующийкод.
   Состояниеможетиметьобратнуюссылкунаобъектконтек-
   ста.Черезнеёнетолькоудобнополучатьизконтекстануж-
   ную информацию, но и осуществлять смену егосостояния.
4. И контекст, и объекты конкретных состояний могут решать,
   когда и какое следующее состояние будет выбрано. Чтобы
   переключитьсостояние,нужноподатьдругойобъект-состо-
   яние вконтекст.