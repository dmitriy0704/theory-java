# Нововведения, добавленные в Java 17

## Оператор switch

### Расширения

- выражения switch;
- оператор yield;
- поддержка списка констант case;
- оператор case со стрелкой;

Выражение switch это по существу оператор switch, который производит значение.
Таким образом, выражение switch можно применять, например, в правой части
операции присваивания. Значение, созданное выражением switch, указывается с
помощью оператора yield. Теперь можно иметь более одной константы в операторе
case за счет использования списка констант. Добавлена вторая форма оператора
case, в которой вместо двоеточия применяется стрелка (->), предоставляющая ему
новые возможности.

### Использование списка констант case

**Традиционный оператор switch:**

```java
public class Code {
    // Использование традиционного оператора switch для получения способа
    // доставки товара с заданным идентификатором. Для большинства товаров
    // используется стандартная доставка, но некоторые требуют специальной
    // транспортировки,
    enum ShipMethod {
        STANDARD, TRUCK, AIR, OVERNIGHT
        // Стандартный, грузовой, самолетом, срочный
    }

    public static void main(String[] args) {
        ShipMethod shipBy;
        int productID = 5099;

        // Для получения способа доставки применятся традиционный оператор switch
        switch (productID) {
            case 1774:
            case 6709:
                shipBy = ShipMethod.TRUCK;
                break;
            case 5099:
                shipBy = ShipMethod.OVERNIGHT;
                break;
            default:
                shipBy = ShipMethod.STANDARD;
        }
        System.out.println("productID " + productID + " : shipBy " + shipBy);
    }
}
```

Операторы case можно заменить на:

            case 1774, 6709:
                shipBy = ShipMethod.TRUCK;
                break;

### Оператор yield

Предоставить значение выражения switch можно с помощью нового оператора yield,
который имеет следующий общий вид:

    yield значение;

**yield вызывает немедленное прекращение switch**.
Здесь значение производится оператором switch и может быть любым выражением,
совместимым с требуемым типом значения. Следовательно, он работает примерно так
же, как break, но обладает дополнительной возможностью предоставлять значение.

Выражение switch указывается в контекст, где требуется значение: в правую часть
оператора присваивания, в аргумент метода или в возвращаемое значение метода.

    int result = switch(what) { // ...

Результат switch присваивается переменной result. Каждый оператор case (плюс
default) должен производить значение (если только не генерируется исключение).

```java
public class Code {
    // Использование традиционного оператора switch для получения способа
    // доставки товара с заданным идентификатором. Для большинства товаров
    // используется стандартная доставка, но некоторые требуют специальной
    // транспортировки,
    enum ShipMethod {
        STANDARD, TRUCK, AIR, OVERNIGHT
        // Стандартный, грузовой, самолетом, срочный
    }

    public static void main(String[] args) {
        int productID = 5099;
        ShipMethod shipBy = switch (productID) {
            case 1774, 8708, 6709:
                yield ShipMethod.TRUCK;
            case 4657, 1887:
                yield ShipMethod.AIR;
            case 2907, 5099:
                yield ShipMethod.OVERNIGHT;
            default:
                yield ShipMethod.STANDARD;
        };
        System.out.println("productID " + productID + " : shipBy " + shipBy);
    }
}
```

### Стрелка в операторе case

Запись

    case 1774, 8708, 6709: // ...

можно заменить на:

    case 1774, 8708, 6709 ->  // ...

Их отличия:

- поток выполнения после case со стрелкой не переходит к следующему оператору
  case.
- case со стрелкой обеспечивает “сокращенный” способ предоставления значения в
  случае использования в выражении switch;
- целью case со стрелкой должно быть выражение, блок либо исключение. Ею не
  может быть последовательность
  операторов, как разрешено в традиционном операторе case.

  
    case константа - > выражение;
    case константа - > { блок-операторов }
    case константа - > throw . . .