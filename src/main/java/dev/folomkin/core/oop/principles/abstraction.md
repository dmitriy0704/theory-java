# Абстракция

Абстракция - это принцип ООП, согласно которому при проектировании классов и
создании объектов необходимо выделять только главные свойства сущности, и
отбрасывать второстепенные.  
Класс является абстрактным, если хотя бы один из его методов является
абстрактным.  
Если метод помечен словом abstract, каждый класс-наследник должен его
реализовать или быть объявленным как абстрактный. Иначе компилятор выбросит
ошибку.
Каждый класс может наследоваться только от одного абстрактного класса, так что в
плане наследования разницы между абстрактными и обычными классами нет. Неважно,
наследуемся мы от абстрактного класса или от обычного, класс-родитель может быть
только один.

```java
abstract class Car {
    private int maxSpeed;

    public abstract void gas();

    public int getMaxSpeed() {
        return maxSpeed;
    }

    public void setMaxSpeed(int maxSpeed) {
        this.maxSpeed = maxSpeed;
    }
}

class Sedan extends Car {
    @Override
    public void gas() {
        System.out.println("Седан газует!");
    }
}
```

Абстрактные классы объявляются с ключевым словом abstract и содержат объявления
абстрактных методов, которые не реализованы в этих классах, а будут реализованы
в подклассах. Абстрактный класс может и не содержать вовсе абстрактных методов.
Предназначение такого класса — быть вершиной иерархии его различных
реализаций.  
Объекты таких классов нельзя создать с помощью оператора new, но можно создать
объекты подклассов, которые реализуют все эти методы. При этом допустимо
объявлять ссылку на абстрактный класс, но инициализировать ее можно только
объектом производного от него класса. Абстрактные классы могут содержать и
полностью реализованные методы, а также конструкторы и поля данных. С помощью
абстрактного класса объявляется контракт (требования к функциональности) для его
подклассов. Примером может служить уже рассмотренный выше абстрактный класс
Number и его подклассы Byte, Float и другие.  
Класс Number объявляет контракт на реализацию ряда методов по преобразованию
данных к значению конкретного базового типа, например, floatValue(). Можно
предположить, что реализация метода будет различной для каждого из
классов-оболочек. Объект класса Number нельзя создать явно при помощи его
собственного конструктора.

```java
abstract class AbstractCardAction {
    private long actionId;

    public AbstractCardAction() {
    }

    public void check() {
    }

    public abstract void doPayment(double amountPayment);
}

class CreditCardAction extends AbstractCardAction {
    @Override
    public void doPayment(double amountPayment) {
        // code
    }
}

public class Code {
    public static void main(String[] args) {
        AbstractCardAction action;
// action = new AbstractCardAction(); //compile error: cannot create object!
        action = new CreditCardAction();
        action.doPayment(7);
    }
}
```

Ссылка action на абстрактный суперкласс инициализируется объектом подкласса, в
котором реализованы все абстрактные методы суперкласса. С помощью этой ссылки
могут вызываться также и неабстрактные методы абстрактного класса, если они не
переопределены в подклассе:action.check();

## Различия между абстрактными классами и интерфейсами

С точки зрения объектно-ориентированного программирования основное различие
между интерфейсом и абстрактным классом заключается в том, что интерфейс не
может иметь состояние, тогда как абстрактный класс может иметь состояние с
переменными экземпляра.

Другое ключевое отличие состоит в том, что классы могут реализовывать более
одного интерфейса, но они могут расширять только один абстрактный класс. Это
решение основано на том факте, что множественное наследование (расширение более
чем одного класса) может привести к взаимоблокировке кода.

Интерфейсы могут быть реализованы классами или расширены интерфейсами, а классы
могут быть только расширены.

Лямбда-выражения могут использоваться только с функциональным интерфейсом,
в то время как абстрактные классы только с одним абстрактным методом не могут
использовать лямбда-выражения.

Интерфейс:

- Может иметь только конечные статические переменные. Интерфейс никогда не может
  изменить свое собственное состояние.
- Класс может реализовывать несколько интерфейсов.
- Может быть реализован с помощью ключевого слова implements. Интерфейс может
  расширять другой интерфейс.
- Для методов можно использовать только статические конечные поля, параметры или
  локальные переменные.
- Только функциональные интерфейсы могут использовать функцию лямбда в Java.
- Не может иметь конструктор.
- Может иметь абстрактные методы.
- Может иметь методы по умолчанию и статические (представлены в Java 8).
- Может иметь частные методы с реализацией (представлено в Java 9).

Абстрактные классы:

- Могут иметь любые экземпляры или статические переменные, изменяемые или
  неизменяемые.
- Класс может расширять только один абстрактный класс.
- Могут иметь экземпляр изменяемых полей, параметров или локальных переменных.
- Абстрактные классы только с одним абстрактным методом не могут использовать
  лямбда-выражения.
- Могут иметь конструктор.
- Могут иметь любые методы.
