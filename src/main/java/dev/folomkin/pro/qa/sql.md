# SQL

## –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ/–ü–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –∏ –ø–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ ‚Äî —ç—Ç–æ –¥–≤–∞ –ø–æ–¥—Ö–æ–¥–∞ –∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é
–∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º –∫ –¥–∞–Ω–Ω—ã–º –≤ –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö, —Ç–∞–∫–∏—Ö –∫–∞–∫ –±–∞–∑—ã
–¥–∞–Ω–Ω—ã—Ö. –≠—Ç–∏ –ø–æ–¥—Ö–æ–¥—ã –ø–æ–º–æ–≥–∞—é—Ç –∏–∑–±–µ–∂–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏
–¥–∞–Ω–Ω—ã—Ö –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.

### 1. –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞

**–û–ø–∏—Å–∞–Ω–∏–µ**: –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç, —á—Ç–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –º–µ–∂–¥—É
—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç —Ä–µ–¥–∫–æ. –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ –≤—Ä–µ–º—è –∏—Ö
–∏–∑–º–µ–Ω–µ–Ω–∏—è, —Å–∏—Å—Ç–µ–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∏–∑–º–µ–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫, –∞
–∑–∞—Ç–µ–º –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø–µ—Ä–µ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç**:

- –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏.
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–Ω–æ—Å–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –ø—ã—Ç–∞–µ—Ç—Å—è —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏—Ö.
- –ü–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –±—ã–ª–∏ –ª–∏ –¥–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω—ã –¥—Ä—É–≥–∏–º–∏
  —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏ —Å –º–æ–º–µ–Ω—Ç–∞ –∏—Ö –∑–∞–≥—Ä—É–∑–∫–∏.
- –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è, –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç
  —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ. –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:

- –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –Ω–∏–∑–∫–æ–º —É—Ä–æ–≤–Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.
- –ú–µ–Ω—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –æ–∂–∏–¥–∞–Ω–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Ç–∞–∫ –∫–∞–∫ –Ω–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫.

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:

- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–∏
  –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.
- –°–ª–æ–∂–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**–ü—Ä–∏–º–µ—Ä –≤ Hibernate**:
–í Hibernate –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å –ø–æ–º–æ—â—å—é
–≤–µ—Ä—Å–∏–∏ (version) –ø–æ–ª—è:

```java

@Entity
public class Author {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    private String name;

    @Version
    private int version; // –ü–æ–ª–µ –≤–µ—Ä—Å–∏–∏ –¥–ª—è –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
}
```

### 2. –ü–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞

**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç, —á—Ç–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –º–µ–∂–¥—É
—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç —á–∞—Å—Ç–æ. –ü–æ—ç—Ç–æ–º—É —Å–∏—Å—Ç–µ–º–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ –≤—Ä–µ–º—è –∏—Ö
–∏–∑–º–µ–Ω–µ–Ω–∏—è, —á—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –¥–æ—Å—Ç—É–ø –¥—Ä—É–≥–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∫ —ç—Ç–∏–º –¥–∞–Ω–Ω—ã–º.

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç**:

- –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –±–∞–∑—ã
  –¥–∞–Ω–Ω—ã—Ö.
- –î—Ä—É–≥–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–µ –º–æ–≥—É—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –¥–∞–Ω–Ω—ã–º –¥–æ —Ç–µ—Ö
  –ø–æ—Ä, –ø–æ–∫–∞ —Ç–µ–∫—É—â–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è (–±—É–¥–µ—Ç –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞ –∏–ª–∏
  –æ—Ç–º–µ–Ω–µ–Ω–∞).

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:

- –ì–∞—Ä–∞–Ω—Ç–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–º —É—Ä–æ–≤–Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.
- –£–ø—Ä–æ—â–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫, —Ç–∞–∫ –∫–∞–∫ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—Ç—Å—è –∑–∞—Ä–∞–Ω–µ–µ.

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:

- –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –Ω–∏–∑–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–∑-–∑–∞ –æ–∂–∏–¥–∞–Ω–∏—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫.
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è –≤–∑–∞–∏–º–Ω—ã—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ (deadlocks).

**–ü—Ä–∏–º–µ—Ä –≤ Hibernate**:
–í Hibernate –ø–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å –ø–æ–º–æ—â—å—é
–∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ `@Lock`:

```java
class Demo {
    void demo() {
        Session session = sessionFactory.openSession();
        Transaction tx = session.beginTransaction();
        Author author = session.get(Author.class, 1, LockMode.PESSIMISTIC_WRITE);
        // –ó–¥–µ—Å—å author –±—É–¥–µ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

        // –ò–∑–º–µ–Ω–µ–Ω–∏—è...
        author.setName("New Name");
        tx.commit();
        session.close();


    }
}

```

### –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–í—ã–±–æ—Ä –º–µ–∂–¥—É –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–æ–π –∏ –ø–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö
—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –æ–∂–∏–¥–∞–µ–º–æ–≥–æ —É—Ä–æ–≤–Ω—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏ –∑–∞ —Ä–µ—Å—É—Ä—Å—ã.
–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ª—É—á—à–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —Å –Ω–∏–∑–∫–∏–º —É—Ä–æ–≤–Ω–µ–º
–∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤, —Ç–æ–≥–¥–∞ –∫–∞–∫ –ø–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∞—è ‚Äî –¥–ª—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —Å –≤—ã—Å–æ–∫–æ–π –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–µ–π –∑–∞
–¥–∞–Ω–Ω—ã–µ. –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ —ç—Ç–∏—Ö –ø–æ–¥—Ö–æ–¥–æ–≤ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å
–¥–æ—Å—Ç—É–ø–æ–º –∫ –¥–∞–Ω–Ω—ã–º –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—Ç—å —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º—ã.

==============================

–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å! üîí –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º **–æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ** –∏ **–ø–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ
–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏** ‚Äî –¥–≤–∞ –ø–æ–¥—Ö–æ–¥–∞ –∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é **–∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º** –∫ –¥–∞–Ω–Ω—ã–º –≤
–º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö –∏–ª–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö.

### üìå –ß—Ç–æ —Ç–∞–∫–æ–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏?

**–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞** ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç **–∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø** –∫
–¥–∞–Ω–Ω—ã–º, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å **–Ω–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π** –∏–ª–∏ **–ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö**.

- **–ü–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞**: –∫–æ–≥–¥–∞ –º—ã –±–ª–æ–∫–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –Ω–∞ –≤—Ä–µ–º—è –∏—Ö
  –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è, —á—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–π –¥–æ—Å—Ç—É–ø.
- **–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞**: –∫–æ–≥–¥–∞ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ **–∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –Ω–µ
  –±—É–¥–µ—Ç**, –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏—Ö –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –≤ –º–æ–º–µ–Ω—Ç **—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è** –¥–∞–Ω–Ω—ã—Ö.

---

## ‚öôÔ∏è –ü–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ (Pessimistic Locking)

### üìå –ß—Ç–æ —ç—Ç–æ?

**–ü–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞** ‚Äî —ç—Ç–æ –ø–æ–¥—Ö–æ–¥, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ *
*–∫–æ–Ω—Ñ–ª–∏–∫—Ç –º–µ–∂–¥—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏** –º–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å. –ü–æ—ç—Ç–æ–º—É, –ø—Ä–µ–∂–¥–µ —á–µ–º –Ω–∞—á–∞—Ç—å
—Ä–∞–±–æ—Ç–∞—Ç—å —Å –¥–∞–Ω–Ω—ã–º–∏, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è **–±–ª–æ–∫–∏—Ä—É–µ—Ç** –∏—Ö –Ω–∞ —É—Ä–æ–≤–Ω–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –Ω–∞
—É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –î—Ä—É–≥–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ **–Ω–µ –º–æ–≥—É—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —ç—Ç–∏–º –¥–∞–Ω–Ω—ã–º**,
–ø–æ–∫–∞ –ø–µ—Ä–≤–∞—è –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç —Å–≤–æ–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏.

### üîê –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

1. **–ó–∞—Ö–≤–∞—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏**: –∫–æ–≥–¥–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –∑–∞–ø–∏—Å–∏, –æ–Ω–∞ "
   –±–ª–æ–∫–∏—Ä—É–µ—Ç" –µ—ë, —á—Ç–æ–±—ã –¥—Ä—É–≥–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–µ –º–æ–≥–ª–∏ –µ—ë –∏–∑–º–µ–Ω–∏—Ç—å.
2. **–û–∂–∏–¥–∞–Ω–∏–µ**: –µ—Å–ª–∏ –¥—Ä—É–≥–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ø—ã—Ç–∞–µ—Ç—Å—è –∏–∑–º–µ–Ω–∏—Ç—å —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ, –æ–Ω–∞ –±—É–¥–µ—Ç
   **–∂–¥–∞—Ç—å**, –ø–æ–∫–∞ –ø–µ—Ä–≤–∞—è –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç —Ä–∞–±–æ—Ç—É.
3. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã**: –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–Ω–∏–º–∞–µ—Ç—Å—è, –∫–æ–≥–¥–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –∏
   –¥—Ä—É–≥–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –º–æ–≥—É—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º.

---

### üßë‚Äçüíª –ü—Ä–∏–º–µ—Ä –ø–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –≤ Hibernate:

```java
Session session = sessionFactory.openSession();
Transaction tx = session.beginTransaction();

// –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞–ø–∏—Å–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —á—Ç–µ–Ω–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)
User user = (User) session.createQuery("FROM User u WHERE u.id = :id")
        .setParameter("id", userId)
        .setLockMode(LockMode.PESSIMISTIC_WRITE) // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏
        .uniqueResult();

user.

setName("New Name");
session.

update(user);

tx.

commit();
session.

close();
```

- **`LockMode.PESSIMISTIC_WRITE`** ‚Äî –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞–ø–∏—Å–∏ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –Ω–∏–∫—Ç–æ
  –¥—Ä—É–≥–æ–π –Ω–µ –º–æ–≥ –µ—ë –æ–±–Ω–æ–≤–∏—Ç—å, –ø–æ–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è.
- **`LockMode.PESSIMISTIC_READ`** ‚Äî –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–ª—è —á—Ç–µ–Ω–∏—è, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è
  –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –¥—Ä—É–≥–∏–º–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏.

---

### ‚úÖ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–µ—Å–∫—É—é –±–ª–æ–∫–∏—Ä–æ–≤–∫—É?

- –ö–æ–≥–¥–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å **–∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –≤—ã—Å–æ–∫–∞—è** –∏ –Ω—É–∂–Ω–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –µ–≥–æ.
- –í —Å–∏—Å—Ç–µ–º–∞—Ö —Å **–≤—ã—Å–æ–∫–æ–π –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–µ–π** –∑–∞ —Ä–µ—Å—É—Ä—Å—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö
  –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö –∏–ª–∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö.
- –ï—Å–ª–∏ –Ω—É–∂–Ω–æ **—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å** –¥–∞–Ω–Ω—ã—Ö –¥–∞–∂–µ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ.

### üö® –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –ø–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:

- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –∏–∑-–∑–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –º–æ–≥—É—Ç **–∑–∞–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è**,
  –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ —Ä–µ—Å—É—Ä—Å —Å–∏–ª—å–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω.
- **–ú–µ—Ä—Ç–≤—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (Deadlock)**: –µ—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –±–ª–æ–∫–∏—Ä—É—é—Ç –¥—Ä—É–≥
  –¥—Ä—É–≥–∞, –º–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å —Å–∏—Ç—É–∞—Ü–∏—è, –∫–æ–≥–¥–∞ **–∫–∞–∂–¥–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∂–¥—ë—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞
  ** (deadlock).
- **–°–Ω–∏–∂–µ–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏**: –ø–æ—Å–∫–æ–ª—å–∫—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç –∑–∞–ø–∏—Å–∏, —ç—Ç–æ
  –º–æ–∂–µ—Ç —Å–Ω–∏–∂–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤.

---

## ‚öôÔ∏è –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ (Optimistic Locking)

### üìå –ß—Ç–æ —ç—Ç–æ?

**–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞** –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç, —á—Ç–æ **–∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –Ω–µ –±—É–¥–µ—Ç**, –∏
–ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤—Å–µ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å —Å –¥–∞–Ω–Ω—ã–º–∏ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏.
–í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—Å—É—Ä—Å—ã, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –±—É–¥–µ—Ç **–ø—Ä–æ–≤–µ—Ä—è—Ç—å, –±—ã–ª–∏ –ª–∏
–¥–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω—ã**, –ø—Ä–µ–∂–¥–µ —á–µ–º –∑–∞–ø–∏—Å–∞—Ç—å –∏—Ö –æ–±—Ä–∞—Ç–Ω–æ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.

### üîê –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

1. **–ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Å—á–∏—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–∏–º–∏.
2. **–ó–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö**: –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è
   –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–µ –±—ã–ª–∏ –ª–∏ –¥–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω—ã –¥—Ä—É–≥–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑
   –≤–µ—Ä—Å–∏–æ–Ω–Ω—ã–π –Ω–æ–º–µ—Ä).
3. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç**: –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º (–∏–ª–∏
   —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–µ–π), —Ç–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è **–Ω–µ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞** (–±—É–¥–µ—Ç –≤—ã–±—Ä–æ—à–µ–Ω–æ
   –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, `OptimisticLockException`), –∏ –Ω—É–∂–Ω–æ —Ä–µ—à–∏—Ç—å, –∫–∞–∫
   –ø–æ—Å—Ç—É–ø–∏—Ç—å ‚Äî –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é –∏–ª–∏ –æ—Ç–º–µ–Ω–∏—Ç—å.

---

### üßë‚Äçüíª –ü—Ä–∏–º–µ—Ä –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –≤ Hibernate:

```java

@Entity
public class User {

    @Id
    private Long id;

    private String name;

    @Version
    private Integer version; // –í–µ—Ä—Å–∏–æ–Ω–Ω–æ–µ –ø–æ–ª–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
}
```

```java
Session session = sessionFactory.openSession();
Transaction tx = session.beginTransaction();

// –ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
User user = session.get(User.class, userId);

user.

setName("Updated Name");

// –ü–æ–ø—ã—Ç–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
session.

update(user);
tx.

commit();
session.

close();
```

- **`@Version`**: –ê–Ω–Ω–æ—Ç–∞—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—è –≤–µ—Ä—Å–∏–∏. Hibernate –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
  –±—É–¥–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, –µ—Å–ª–∏ –≤–µ—Ä—Å–∏—è –¥–∞–Ω–Ω—ã—Ö –±—ã–ª–∞
  –∏–∑–º–µ–Ω–µ–Ω–∞ –¥—Ä—É–≥–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–µ–π.

---

### ‚úÖ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–µ—Å–∫—É—é –±–ª–æ–∫–∏—Ä–æ–≤–∫—É?

- –ö–æ–≥–¥–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å **–∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –Ω–∏–∑–∫–∞—è**.
- –ö–æ–≥–¥–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ **–±—ã—Å—Ç—Ä—ã–µ** –∏ –º–æ–∂–Ω–æ —Å–ø–æ–∫–æ–π–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –ª–∏
  –¥–∞–Ω–Ω—ã–µ.
- –î–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å **–Ω–∏–∑–∫–æ–π –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–µ–π** –∑–∞ —Ä–µ—Å—É—Ä—Å—ã –∏–ª–∏ —Å **–Ω–µ—á–∞—Å—Ç—ã–º–∏
  –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –¥–∞–Ω–Ω—ã—Ö**.
- –í —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö, –≥–¥–µ **–ø–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–æ–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ** –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å
  –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã.

### üö® –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:

- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∑–∞–ø–∏—Å—å—é**: –Ω—É–∂–Ω–æ –≤—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –≤–µ—Ä—Å–∏—é, —á—Ç–æ –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å
  **–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã**.
- **–ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–æ–π**: –µ—Å–ª–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç –≤—Å—ë-—Ç–∞–∫–∏ —Å–ª—É—á–∏–ª—Å—è, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
  —Ä–µ—à–∞—Ç—å, –∫–∞–∫ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö).
- **–ù–µ –≤—Å–µ–≥–¥–∞ –ø–æ–¥—Ö–æ–¥—è—â–µ** –¥–ª—è –≤—ã—Å–æ–∫–æ–∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö —Å–∏—Å—Ç–µ–º, –≥–¥–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å
  –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–∞–Ω–Ω—ã—Ö –≤–µ–ª–∏–∫–∞.

---

## üßë‚Äçüíª –ü—Ä–∏–º–µ—Ä —Å–∏—Ç—É–∞—Ü–∏–∏ —Å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–º –≤ –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ:

1. **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è 1**: –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ, –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –ø—ã—Ç–∞–µ—Ç—Å—è —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å
   –∏—Ö. –í–µ—Ä—Å–∏—è = 1.
2. **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è 2**: –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ç–µ –∂–µ –¥–∞–Ω–Ω—ã–µ, –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö.
   –í–µ—Ä—Å–∏—è = 1.
3. **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è 1**: –ü—ã—Ç–∞–µ—Ç—Å—è —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è, –Ω–æ –≤–µ—Ä—Å–∏—è –¥–∞–Ω–Ω—ã—Ö —É–∂–µ
   –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –¥–æ 2, –∏ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ **OptimisticLockException**.

---

## üß© –†–µ–∑—é–º–µ

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞         | –ü–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ (Pessimistic)       | –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ (Optimistic)                                 |
|------------------------|-------------------------------------------------|-------------------------------------------------------------------------|
| **–ú–µ—Ö–∞–Ω–∏–∑–º**           | –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã               | –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º                                 |
| **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è** | –í—ã—Å–æ–∫–∞—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è –∑–∞ –¥–∞–Ω–Ω—ã–µ                   | –ù–∏–∑–∫–∞—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è –∏ —Ä–µ–¥–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è                                   |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | –ú–æ–∂–µ—Ç —Å–Ω–∏–∑–∏—Ç—å—Å—è –∏–∑-–∑–∞ –æ–∂–∏–¥–∞–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫       | –í—ã—Å–æ–∫–∞—è, –ø–æ–∫–∞ –Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤                                            |
| **–ú–µ—Ä—Ç–≤—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏** | –í–æ–∑–º–æ–∂–Ω—ã                                        | –ù–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ                                                            |
| **–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è**       | –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã, —Å–∏—Å—Ç–µ–º—ã —Å –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π | –°–∏—Å—Ç–µ–º—ã —Å –Ω–∏–∑–∫–æ–π –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–µ–π –∏–ª–∏ –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å –º–∞–ª—ã–º —á–∏—Å–ª–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π |

---

## üèÅ –ò—Ç–æ–≥:

- **–ü–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞** ‚Äî —ç—Ç–æ –±–æ–ª–µ–µ **–∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥** —Å –≥–∞—Ä–∞–Ω—Ç–∏–µ–π
  —Ç–æ–≥–æ, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –Ω–µ –∏–∑–º–µ–Ω—è—é—Ç—Å—è –¥—Ä—É–≥–∏–º–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏, –Ω–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫
  –ø—Ä–æ–±–ª–µ–º–∞–º —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é.
- **–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞** ‚Äî **–±–æ–ª–µ–µ –ª—ë–≥–∫–∏–π** –ø–æ–¥—Ö–æ–¥, –∫–æ—Ç–æ—Ä—ã–π
  –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç, —á—Ç–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –Ω–µ –±—É–¥–µ—Ç, –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —ç—Ç–æ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏
  –¥–∞–Ω–Ω—ã—Ö.

–û–±–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –ø—Ä–∏–º–µ–Ω–∏–º—ã –≤ —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞—Ö, –∏ –≤—ã–±–æ—Ä –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∏ —Ç–≤–æ–µ–π
—Å–∏—Å—Ç–µ–º—ã: –µ—ë –Ω–∞–≥—Ä—É–∑–∫–∏, —á–∏—Å–ª–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —á–∞—Å—Ç–æ—Ç—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–∞–Ω–Ω—ã—Ö.

–•–æ—á–µ—à—å —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è —Å–≤–æ–µ–π —Å–∏—Å—Ç–µ–º—ã, –∏–ª–∏ –ø–æ–¥—Å–∫–∞–∂–µ—à—å, –∫–∞–∫–æ–π
–º–µ—Ö–∞–Ω–∏–∑–º —Ç–µ–±–µ –±–ª–∏–∂–µ –ø–æ –∑–∞–¥–∞—á–∞–º?

> ## –ò–Ω–¥–µ–∫—Å—ã –≤ SQL


–ò–Ω–¥–µ–∫—Å—ã –≤ **SQL** ‚Äî —ç—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ —É–ª—É—á—à–∞—é—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
–æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ–∏—Å–∫–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –∞ —Ç–∞–∫–∂–µ –ø–æ–∑–≤–æ–ª—è—é—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É
–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö. –û–Ω–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö,
–æ—Å–æ–±–µ–Ω–Ω–æ –∫–æ–≥–¥–∞ —Ç–∞–±–ª–∏—Ü—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –±–æ–ª—å—à–∏–º–∏.

–í SQL —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–∏–ø–æ–≤ –∏–Ω–¥–µ–∫—Å–æ–≤, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –∏–º–µ–µ—Ç —Å–≤–æ–∏
–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–∞–¥–∞—á –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö.

### 1. **–ü–µ—Ä–≤–∏—á–Ω—ã–π –∏–Ω–¥–µ–∫—Å (Primary Index)**

- **–û–ø–∏—Å–∞–Ω–∏–µ**: –≠—Ç–æ –∏–Ω–¥–µ–∫—Å, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –¥–ª—è —Å—Ç–æ–ª–±—Ü–∞ (–∏–ª–∏
  —Å—Ç–æ–ª–±—Ü–æ–≤), –ø–æ–º–µ—á–µ–Ω–Ω—ã—Ö –∫–∞–∫ **PRIMARY KEY**. –û–Ω –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å
  –∑–Ω–∞—á–µ–Ω–∏–π –≤ —Å—Ç–æ–ª–±—Ü–µ –∏–ª–∏ –≥—Ä—É–ø–ø–µ —Å—Ç–æ–ª–±—Ü–æ–≤.
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
    - –¢–∞–±–ª–∏—Ü–∞ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø–µ—Ä–≤–∏—á–Ω—ã–π –∏–Ω–¥–µ–∫—Å.
    - –û–Ω –≤—Å–µ–≥–¥–∞ —É–Ω–∏–∫–∞–ª–µ–Ω –∏ –Ω–µ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å `NULL` –∑–Ω–∞—á–µ–Ω–∏—è.
    - –ü–µ—Ä–≤–∏—á–Ω—ã–π –∏–Ω–¥–µ–∫—Å –æ–±—ã—á–Ω–æ —è–≤–ª—è–µ—Ç—Å—è –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º (—Å–º. –Ω–∏–∂–µ).
- **–ü—Ä–∏–º–µ—Ä**:
  ```sql
  CREATE TABLE users (
      user_id INT PRIMARY KEY,
      username VARCHAR(50),
      email VARCHAR(100)
  );
  ```

### 2. **–ö–ª–∞—Å—Ç–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∏–Ω–¥–µ–∫—Å (Clustered Index)**

- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∏–Ω–¥–µ–∫—Å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –ø–æ—Ä—è–¥–æ–∫ —Å—Ç—Ä–æ–∫ –≤
  —Ç–∞–±–ª–∏—Ü–µ. –ö–æ–≥–¥–∞ –≤—ã —Å–æ–∑–¥–∞–µ—Ç–µ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∏–Ω–¥–µ–∫—Å, –¥–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –±—É–¥—É—Ç
  –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —ç—Ç–∏–º –∏–Ω–¥–µ–∫—Å–æ–º. –ö–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –≤ —Ç–∞–±–ª–∏—Ü–µ –º–æ–∂–µ—Ç
  –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∏–Ω–¥–µ–∫—Å.
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
    - –û–±—ã—á–Ω–æ –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∏–Ω–¥–µ–∫—Å.
    - –ï—Å–ª–∏ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∏–Ω–¥–µ–∫—Å –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç, —Å—Ç—Ä–æ–∫–∏ —Ç–∞–±–ª–∏—Ü—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤
      –ø–æ—Ä—è–¥–∫–µ, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º —ç—Ç–æ–º—É –∏–Ω–¥–µ–∫—Å—É.
- **–ü—Ä–∏–º–µ—Ä**:
  ```sql
  CREATE CLUSTERED INDEX idx_user_id ON users(user_id);
  ```

### 3. **–ù–µ–∫–ª–∞—Å—Ç–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∏–Ω–¥–µ–∫—Å (Non-clustered Index)**

- **–û–ø–∏—Å–∞–Ω–∏–µ**: –≠—Ç–æ –æ–±—ã—á–Ω—ã–π –∏–Ω–¥–µ–∫—Å, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç —É–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞ —Å—Ç—Ä–æ–∫–∏ –≤
  —Ç–∞–±–ª–∏—Ü–µ, –Ω–æ –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –ø–æ—Ä—è–¥–æ–∫ –¥–∞–Ω–Ω—ã—Ö –≤ —Ç–∞–±–ª–∏—Ü–µ. –û–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫
  –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –∫–æ—Ç–æ—Ä–∞—è —Ö—Ä–∞–Ω–∏—Ç –∫–ª—é—á–∏ –∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å—Ç—Ä–æ–∫–∏.
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
    - –û–¥–∏–Ω —Å—Ç–æ–ª–±–µ—Ü –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç–æ–ª–±—Ü–æ–≤ –º–æ–≥—É—Ç –±—ã—Ç—å –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω—ã.
    - –ú–æ–∂–µ—Ç –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–µ–∫–ª–∞—Å—Ç–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤ –Ω–∞ –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ.
- **–ü—Ä–∏–º–µ—Ä**:
  ```sql
  CREATE NONCLUSTERED INDEX idx_username ON users(username);
  ```

### 4. **–£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å (Unique Index)**

- **–û–ø–∏—Å–∞–Ω–∏–µ**: –≠—Ç–æ—Ç –∏–Ω–¥–µ–∫—Å –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ–º–æ–º
  —Å—Ç–æ–ª–±—Ü–µ –∏–ª–∏ –≥—Ä—É–ø–ø–µ —Å—Ç–æ–ª–±—Ü–æ–≤ –±—É–¥—É—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏, —Ç–æ –µ—Å—Ç—å –Ω–µ –±—É–¥–µ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è
  –∑–Ω–∞—á–µ–Ω–∏–π.
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
    - –û–Ω —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –∫–æ–≥–¥–∞ –Ω–∞ —Å—Ç–æ–ª–±–µ—Ü –Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ *
      *UNIQUE**.
    - –ú–æ–∂–µ—Ç –±—ã—Ç—å –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º –∏–ª–∏ –Ω–µ–∫–ª–∞—Å—Ç–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º.
- **–ü—Ä–∏–º–µ—Ä**:
  ```sql
  CREATE UNIQUE INDEX idx_email ON users(email);
  ```

### 5. **–ò–Ω–¥–µ–∫—Å –ø–æ–ª–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ (Full-text Index)**

- **–û–ø–∏—Å–∞–Ω–∏–µ**: –≠—Ç–æ—Ç –∏–Ω–¥–µ–∫—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–π
  –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –±–æ–ª—å—à–∏—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—è—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ —Å—Ç–∞—Ç—å—è—Ö –∏–ª–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö).
  –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫, –∫–æ—Ç–æ—Ä—ã–π —É—á–∏—Ç—ã–≤–∞–µ—Ç –Ω–µ —Ç–æ–ª—å–∫–æ
  —Ç–æ—á–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è, –Ω–æ –∏ —Å–ª–æ–≤–∞, —Å–∏–Ω–æ–Ω–∏–º—ã, –º–æ—Ä—Ñ–æ–ª–æ–≥–∏—é.
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
    - –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∏–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –Ω–∞ —Å—Ç–æ–ª–±—Ü–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–µ
      –¥–∞–Ω–Ω—ã–µ.
    - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º–∏ —Ç–∏–ø–∞ `MATCH ... AGAINST`.
- **–ü—Ä–∏–º–µ—Ä**:
  ```sql
  CREATE FULLTEXT INDEX idx_fulltext_content ON articles(content);
  ```

### 6. **–ò–Ω–¥–µ–∫—Å —Å –±–∏—Ç–æ–≤—ã–º–∏ –∫–∞—Ä—Ç–∞–º–∏ (Bitmap Index)**

- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ò–Ω–¥–µ–∫—Å —Å –±–∏—Ç–æ–≤–æ–π –∫–∞—Ä—Ç–æ–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –≤
  —Å—Ç–æ–ª–±—Ü–∞—Ö —Å –Ω–µ–±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ —Å—Ç–æ–ª–±—Ü–∞—Ö —Å
  —Ñ–ª–∞–≥–∞–º–∏ –∏–ª–∏ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è–º–∏).
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
    - –•–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å—Ç–æ–ª–±—Ü–æ–≤ —Å –Ω–µ–±–æ–ª—å—à–∏–º —á–∏—Å–ª–æ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π,
      –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —Ñ–ª–∞–≥–æ–≤ (—Ç.–µ. `YES`/`NO`, `TRUE`/`FALSE`).
    - –ë—ã—Å—Ç—Ä–µ–µ, —á–µ–º –æ–±—ã—á–Ω—ã–π –∏–Ω–¥–µ–∫—Å, –¥–ª—è —á—Ç–µ–Ω–∏—è, –Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö –∏–ª–∏
      –≤—Å—Ç–∞–≤–∫–∞—Ö.
- **–ü—Ä–∏–º–µ—Ä**:
  ```sql
  CREATE BITMAP INDEX idx_is_active ON users(is_active);
  ```

### 7. **–ò–Ω–¥–µ–∫—Å –ø–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—é (Function-based Index)**

- **–û–ø–∏—Å–∞–Ω–∏–µ**: –≠—Ç–æ –∏–Ω–¥–µ–∫—Å, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏–∏,
  –ø—Ä–∏–º–µ–Ω—è–µ–º–æ–π –∫ —Å—Ç–æ–ª–±—Ü—É. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –Ω–µ –ø—Ä–æ—Å—Ç–æ –¥–∞–Ω–Ω—ã–µ, –∞
  —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã—á–∏—Å–ª–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–∞ –¥–∞–Ω–Ω—ã—Ö —Å—Ç–æ–ª–±—Ü–æ–≤.
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
    - –ü–æ–ª–µ–∑–µ–Ω, –∫–æ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –∏–ª–∏
      –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π –¥–∞–Ω–Ω—ã—Ö.
- **–ü—Ä–∏–º–µ—Ä**:
  ```sql
  CREATE INDEX idx_lowercase_username ON users(LOWER(username));
  ```

### 8. **–ò–Ω–¥–µ–∫—Å –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—Ç–æ–ª–±—Ü–æ–≤ (Composite Index)**

- **–û–ø–∏—Å–∞–Ω–∏–µ**: –≠—Ç–æ—Ç –∏–Ω–¥–µ–∫—Å —Å–æ–∑–¥–∞—ë—Ç—Å—è –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—Ç–æ–ª–±—Ü–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –û–Ω
  –ø–æ–º–æ–≥–∞–µ—Ç —É—Å–∫–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —Å—Ç–æ–ª–±—Ü–∞–º
  –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
    - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤–∫–ª—é—á–∞—é—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ
      —É—Å–ª–æ–≤–∏–π.
    - –ò–Ω–¥–µ–∫—Å –±—É–¥–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç
      —Å—Ç–æ–ª–±—Ü—ã –≤ —Ç–æ–º –ø–æ—Ä—è–¥–∫–µ, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–Ω–∏ –±—ã–ª–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ –∏–Ω–¥–µ–∫—Å–µ.
- **–ü—Ä–∏–º–µ—Ä**:
  ```sql
  CREATE INDEX idx_username_email ON users(username, email);
  ```

### 9. **–ò–Ω–¥–µ–∫—Å —Å –æ–±—Ä–∞—Ç–Ω–æ–π –∑–∞–ø–∏—Å—å—é (Reverse Key Index)**

- **–û–ø–∏—Å–∞–Ω–∏–µ**: –≠—Ç–æ –∏–Ω–¥–µ–∫—Å, –≥–¥–µ –ø–æ—Ä—è–¥–æ–∫ –±–∞–π—Ç–æ–≤ –≤ –∑–Ω–∞—á–µ–Ω–∏–∏ –∫–ª—é—á–∞ –∏–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è.
  –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è "–≥–æ—Ä—è—á–∏—Ö —Ç–æ—á–µ–∫" –≤ –∏–Ω–¥–µ–∫—Å–∞—Ö, –æ—Å–æ–±–µ–Ω–Ω–æ –∫–æ–≥–¥–∞
  —á–∞—Å—Ç–æ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Å—Ç–æ–ª–±—Ü—ã —Å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä,
  –∞–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç).
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
    - –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ –∏–Ω–¥–µ–∫—Å–∞–º –±–æ–ª–µ–µ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ.
- **–ü—Ä–∏–º–µ—Ä**:
  ```sql
  CREATE INDEX idx_reverse_username ON users(REVERSE(username));
  ```

### 10. **–ò–Ω–¥–µ–∫—Å —Å —É–Ω–∏–∫–∞–ª—å–Ω–æ–π –º–∞—Å–∫–æ–π (Covering Index)**

- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ò–Ω–¥–µ–∫—Å, –∫–æ—Ç–æ—Ä—ã–π –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –≤—Å–µ —Å—Ç–æ–ª–±—Ü—ã, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è
  –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω–¥–µ–∫—Å –¥–ª—è
  –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞, –Ω–µ –æ–±—Ä–∞—â–∞—è—Å—å –∫ —Å–∞–º–æ–π —Ç–∞–±–ª–∏—Ü–µ.
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
    - –ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Å–ª—É—á–∞—è—Ö, –∫–æ–≥–¥–∞ –∑–∞–ø—Ä–æ—Å—ã –≤—ã–±–∏—Ä–∞—é—Ç —Ç–æ–ª—å–∫–æ —Ç–µ —Å—Ç–æ–ª–±—Ü—ã,
      –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ –∏–Ω–¥–µ–∫—Å–µ.
- **–ü—Ä–∏–º–µ—Ä**:
  ```sql
  CREATE INDEX idx_user_details ON users(user_id, username, email);
  ```

### 11. **–ò–Ω–¥–µ–∫—Å –ø–æ –ø–æ–¥—Å–µ–∫–≤–µ–Ω—Ü–∏–∏ (Spatial Index)**

- **–û–ø–∏—Å–∞–Ω–∏–µ**: –≠—Ç–æ—Ç —Ç–∏–ø –∏–Ω–¥–µ–∫—Å–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º–∏
  –¥–∞–Ω–Ω—ã–º–∏, —Ç–∞–∫–∏–º–∏ –∫–∞–∫ –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏–ª–∏ –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã.
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
    - –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤ –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –±–∞–∑–∞—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–æ–∏—Å–∫–∞ –æ–±—ä–µ–∫—Ç–æ–≤ –≤
      –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö.
- **–ü—Ä–∏–º–µ—Ä**:
  ```sql
  CREATE SPATIAL INDEX idx_location ON places(location);
  ```

---

### üß© **–ö–∞–∫ –≤—ã–±–∏—Ä–∞—Ç—å –∏–Ω–¥–µ–∫—Å –¥–ª—è —Å–≤–æ–µ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö?**

1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —á—Ç–µ–Ω–∏—è vs –∑–∞–ø–∏—Å–∏**: –ò–Ω–¥–µ–∫—Å—ã –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É—Å–∫–æ—Ä—è—é—Ç
   –æ–ø–µ—Ä–∞—Ü–∏–∏ —á—Ç–µ–Ω–∏—è (–ø–æ–∏—Å–∫, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞), –Ω–æ –∑–∞–º–µ–¥–ª—è—é—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏
   –∑–∞–ø–∏—Å–∏ (–≤—Å—Ç–∞–≤–∫–∞, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ), —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ —Ç—Ä–µ–±—É—é—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–∞–º–æ–≥–æ
   –∏–Ω–¥–µ–∫—Å–∞. –ü–æ—ç—Ç–æ–º—É –Ω—É–∂–Ω–æ —Ç—â–∞—Ç–µ–ª—å–Ω–æ –ø–æ–¥–±–∏—Ä–∞—Ç—å, –∫–∞–∫–∏–µ —Å—Ç–æ–ª–±—Ü—ã –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å.
2. **–¢–∏–ø –¥–∞–Ω–Ω—ã—Ö**: –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–Ω–¥–µ–∫—Å—ã –ª—É—á—à–µ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º–∏
   –¥–∞–Ω–Ω—ã–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å), –¥—Ä—É–≥–∏–µ ‚Äî —Å —á–∏—Å–ª–æ–≤—ã–º–∏ –∏–ª–∏ –±—É–ª–µ–≤—ã–º–∏
   –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±–∏—Ç–æ–≤—ã–µ –∏–Ω–¥–µ–∫—Å—ã).
3. **–†–∞–∑–º–µ—Ä —Ç–∞–±–ª–∏—Ü—ã**: –î–ª—è –æ—á–µ–Ω—å –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü –∏–Ω–¥–µ–∫—Å—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è
   –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å—é –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤.
4. **–¢–∏–ø –∑–∞–ø—Ä–æ—Å–æ–≤**: –ò–Ω–¥–µ–∫—Å—ã –ø–æ–º–æ–≥–∞—é—Ç –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π,
   —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π –∏–ª–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏ –ø–æ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Å—Ç–æ–ª–±—Ü–∞–º.

---

### üöÄ **–ó–∞–∫–ª—é—á–µ–Ω–∏–µ**

–ò–Ω–¥–µ–∫—Å—ã –≤ SQL –∏–≥—Ä–∞—é—Ç –≤–∞–∂–Ω—É—é —Ä–æ–ª—å –≤ –ø–æ–≤—ã—à–µ–Ω–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–æ–≤,
–æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –±–æ–ª—å—à–∏–º–∏ –æ–±—ä–µ–º–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö. –†–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –∏–Ω–¥–µ–∫—Å–æ–≤
–ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç —Ä–∞–∑–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
–∑–∞–ø—Ä–æ—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –í—ã–±–æ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ç–∏–ø–∞ –∏–Ω–¥–µ–∫—Å–∞ –∏
–≥—Ä–∞–º–æ—Ç–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–º–∏ –º–æ–∂–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã.