# JAVA CORE.


## –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–∞–º—è—Ç–∏ –∏ —Å–±–æ—Ä–∫–∞ –º—É—Å–æ—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏ –ø–∞–º—è—Ç–∏ –≤ Java

–ö–æ–≥–¥–∞ —Ç—ã –∑–∞–ø—É—Å–∫–∞–µ—à—å Java-–ø—Ä–æ–≥—Ä–∞–º–º—É, –ø–∞–º—è—Ç—å –¥–µ–ª–∏—Ç—Å—è –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞–∂–Ω—ã—Ö —á–∞—Å—Ç–µ–π:

| –û–±–ª–∞—Å—Ç—å           | –ß—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è                                    |
|-------------------|-------------------------------------------------|
| **Heap (–ö—É—á–∞)**   | –í—Å–µ –æ–±—ä–µ–∫—Ç—ã –∏ –¥–∞–Ω–Ω—ã–µ, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Å –ø–æ–º–æ—â—å—é `new` |
| **Stack (–°—Ç–µ–∫)**  | –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –≤—ã–∑–æ–≤—ã –º–µ—Ç–æ–¥–æ–≤           |
| **–ú–µ—Ç–∞—Å–ø–µ–π—Å**     | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∞—Å—Å–∞—Ö (–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ)               |
| **Code Cache**    | –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ JIT-–∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞            |
| **Direct Memory** | –ü–∞–º—è—Ç—å –≤–Ω–µ –∫—É—á (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, NIO)    |

#### Heap (–ö—É—á–∞)

- –°–∞–º–∞—è –±–æ–ª—å—à–∞—è –æ–±–ª–∞—Å—Ç—å –ø–∞–º—è—Ç–∏.
- –£–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–±–æ—Ä—â–∏–∫–æ–º –º—É—Å–æ—Ä–∞ (**GC** ‚Äî Garbage Collector).
- –≤—Å–µ **–æ–±—ä–µ–∫—Ç—ã** (`new` –æ–±—ä–µ–∫—Ç—ã, –º–∞—Å—Å–∏–≤—ã),
- —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –Ω–∏–º–∏ –¥–∞–Ω–Ω—ã–µ.

**Heap** ‚Äî —ç—Ç–æ –æ–±—â–∞—è –ø–∞–º—è—Ç—å –¥–ª—è –≤—Å–µ—Ö –ø–æ—Ç–æ–∫–æ–≤.  
–ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è ‚Äî —ç—Ç–æ —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–±—ä–µ–∫—Ç, —Ç–æ —Å–∞–º–∞ —Å—Å—ã–ª–∫–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Å—Ç–µ–∫–µ, –∞
–æ–±—ä–µ–∫—Ç ‚Äî –≤ –∫—É—á–µ.

_–ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω–∞ –∫—É—á–∞?_

Heap –¥–µ–ª–∏—Ç—Å—è –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–±–ª–∞—Å—Ç–µ–π:

```
Heap Memory
‚îú‚îÄ‚îÄ Young Generation
‚îÇ    ‚îú‚îÄ‚îÄ Eden (—Å–∞–¥ –Ω–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤)
‚îÇ    ‚îú‚îÄ‚îÄ Survivor 0 (–≤—ã–∂–∏–≤—à–∏–µ –æ–±—ä–µ–∫—Ç—ã)
‚îÇ    ‚îî‚îÄ‚îÄ Survivor 1
‚îú‚îÄ‚îÄ Old Generation (—Å—Ç–∞—Ä—ã–µ –æ–±—ä–µ–∫—Ç—ã)
‚îî‚îÄ‚îÄ (–∏–Ω–æ–≥–¥–∞) Metaspace (–¥–ª—è –∫–ª–∞—Å—Å–æ–≤)
```

_–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–∞–º—è—Ç—å –≤ –∫—É—á–µ?_

1. **–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞** (`new MyClass()`) ‚ûî –ø–∞–º—è—Ç—å –≤—ã–¥–µ–ª—è–µ—Ç—Å—è –≤ Eden.
2. **Minor GC** –æ—á–∏—â–∞–µ—Ç Eden –æ—Ç –º—É—Å–æ—Ä–∞.
    - –í—ã–∂–∏–≤—à–∏–µ –æ–±—ä–µ–∫—Ç—ã –ø–µ—Ä–µ–Ω–æ—Å—è—Ç—Å—è –≤ Survivor –æ–±–ª–∞—Å—Ç–∏.
3. **–°—Ç–∞—Ä–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤**: –ø–æ—Å–ª–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö Minor GC –≤—ã–∂–∏–≤—à–∏–µ –æ–±—ä–µ–∫—Ç—ã
   –ø–µ—Ä–µ–º–µ—â–∞—é—Ç—Å—è –≤ **Old Generation**.
4. **Major GC** —É–±–∏—Ä–∞–µ—Ç –º—É—Å–æ—Ä –∏–∑ Old Generation.

_–ß—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –∫—É—á–µ?_

| –≠–ª–µ–º–µ–Ω—Ç             | –û–ø–∏—Å–∞–Ω–∏–µ                                         |
|:--------------------|:-------------------------------------------------|
| –≠–∫–∑–µ–º–ø–ª—è—Ä—ã –∫–ª–∞—Å—Å–æ–≤  | –í—Å–µ `new` –æ–±—ä–µ–∫—Ç—ã                                |
| –ú–∞—Å—Å–∏–≤—ã             | –ú–∞—Å—Å–∏–≤—ã –ª—é–±–æ–≥–æ —Ç–∏–ø–∞ (`int[]`, `String[]` –∏ —Ç.–¥.) |
| –°—Ç—Ä–æ–∫–∏ (`String`)   | –ï—Å–ª–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —è–≤–Ω–æ —á–µ—Ä–µ–∑ `new`, –∞ –Ω–µ —á–µ—Ä–µ–∑ –ø—É–ª  |
| –ö—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ | –ù–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–ª–ª–µ–∫—Ü–∏–∏, –∫—ç—à                         |

_–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –æ–±—ä–µ–∫—Ç–∞ –≤ –∫—É—á–µ_

| –°—Ç–∞–¥–∏—è      | –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç                                                             |
|:------------|:---------------------------------------------------------------------------|
| –°–æ–∑–¥–∞–Ω–∏–µ    | –û–±—ä–µ–∫—Ç —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ Eden.                                                   |
| –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ | –ï—Å–ª–∏ –≤—ã–∂–∏–ª –ø–æ—Å–ª–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö GC ‚ûî –ø–æ–ø–∞–¥–∞–µ—Ç –≤ Survivor, –ø–æ—Ç–æ–º –≤ Old Gen.     |
| –£–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ | –ö–æ–≥–¥–∞ –±–æ–ª—å—à–µ –Ω–µ—Ç —Å–∏–ª—å–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ ‚ûî –æ–±—ä–µ–∫—Ç —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è —Å–±–æ—Ä—â–∏–∫–æ–º –º—É—Å–æ—Ä–∞ (GC). |

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ: –°—Ç–µ–∫ –ø—Ä–æ—Ç–∏–≤ –ö—É—á–∏**

| –ü–∞—Ä–∞–º–µ—Ç—Ä   | –°—Ç–µ–∫                         | –ö—É—á–∞                                    |
|:-----------|:-----------------------------|:----------------------------------------|
| –°–æ–¥–µ—Ä–∂–∏–º–æ–µ | –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, —Å—Å—ã–ª–∫–∏ | –û–±—ä–µ–∫—Ç—ã                                 |
| –ñ–∏–∑–Ω—å      | –î–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º–µ—Ç–æ–¥–∞         | –î–æ —Ç–æ–≥–æ, –∫–∞–∫ –æ–±—ä–µ–∫—Ç —Å—Ç–∞–Ω–µ—Ç –Ω–µ–¥–æ—Å—Ç–∏–∂–∏–º—ã–º |
| –†–∞–∑–º–µ—Ä     | –ú–∞–ª–µ–Ω—å–∫–∏–π                    | –ë–æ–ª—å—à–æ–π                                 |
| –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ               | –°–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞                          |

**–ò—Ç–æ–≥–æ:**

- **–ö—É—á–∞** ‚Äî –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
- **–£–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** —á–µ—Ä–µ–∑ —Å–±–æ—Ä–∫—É –º—É—Å–æ—Ä–∞ (GC).
- **–û–¥–Ω–∞ –∫—É—á–∞** –Ω–∞ –≤—Å–µ –ø–æ—Ç–æ–∫–∏.
- **Heap –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω ‚ûî OutOfMemoryError**.

_**–ö—É—á–∞ –¥–µ–ª–∏—Ç—Å—è –Ω–∞ –ø–æ–∫–æ–ª–µ–Ω–∏—è:**_

| –ü–æ–∫–æ–ª–µ–Ω–∏–µ            | –û–ø–∏—Å–∞–Ω–∏–µ                                         |
|----------------------|--------------------------------------------------|
| **Young Generation** | –ù–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã; –±—ã—Å—Ç—Ä–æ —É–º–∏—Ä–∞—é—Ç ‚Äî –±—ã—Å—Ç—Ä–æ —É–±–∏—Ä–∞—é—Ç—Å—è |
| **Old Generation**   | "–î–æ–ª–≥–æ –∂–∏–≤—É—â–∏–µ" –æ–±—ä–µ–∫—Ç—ã                          |
| **Survivor Spaces**  | –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –±—É—Ñ–µ—Ä—ã –º–µ–∂–¥—É Young –∏ Old           |

##### **–ú–æ–ª–æ–¥–æ–µ –ø–æ–∫–æ–ª–µ–Ω–∏–µ (Young Gen)**

- –î–µ–ª–∏—Ç—Å—è –Ω–∞ **Eden** + **Survivor S0/S1**.
- –ù–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã —Å–Ω–∞—á–∞–ª–∞ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ **Eden**.
- –ü–æ—Å–ª–µ –æ–¥–Ω–æ–π –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–±–æ—Ä–æ–∫ –º—É—Å–æ—Ä–∞ –º–æ–≥—É—Ç –ø–µ—Ä–µ–π—Ç–∏ –≤ **Survivor** –∏–ª–∏
  **Old**.

**–ß—Ç–æ —Ç–∞–∫–æ–µ –º–æ–ª–æ–¥—ã–µ –æ–±—ä–µ–∫—Ç—ã –≤ Java Heap?**

–ö–æ–≥–¥–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã, –æ–Ω–∏ —Å–Ω–∞—á–∞–ª–∞ **–ø–æ–ø–∞–¥–∞—é—Ç –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—É—é
—á–∞—Å—Ç—å –∫—É—á–∏**, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **Young Generation** –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ Young Gen.  
**–≠—Ç–æ –º–µ—Å—Ç–æ –¥–ª—è "–º–æ–ª–æ–¥—ã—Ö" –æ–±—ä–µ–∫—Ç–æ–≤** ‚Äî —Ç–æ –µ—Å—Ç—å –Ω–µ–¥–∞–≤–Ω–æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö.

**–û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è:**

- –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö –∂–∏–≤—É—Ç –æ—á–µ–Ω—å **–∫–æ—Ä–æ—Ç–∫–æ–µ –≤—Ä–µ–º—è** (–Ω–∞–ø—Ä–∏–º–µ—Ä,
  –∫–∞–∫–∏–µ-—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏, –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∏ —Ç.–¥.).
- –ß—Ç–æ–±—ã —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏—Ö –±—ã—Å—Ç—Ä–æ —É–±–∏—Ä–∞—Ç—å, Java –¥–µ–ª–∏—Ç –∫—É—á—É –Ω–∞ –ø–æ–∫–æ–ª–µ–Ω–∏—è:  
  **–º–æ–ª–æ–¥—ã–µ** (Young) –∏ **—Å—Ç–∞—Ä—ã–µ** (Old).

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫—É—á–∏ –ø–∞–º—è—Ç–∏ –≤ Java**

–ì—Ä—É–±–æ –¥–µ–ª–∏—Ç—Å—è –Ω–∞ –¥–≤–µ –±–æ–ª—å—à–∏–µ —á–∞—Å—Ç–∏:

```
Heap Memory
‚îú‚îÄ‚îÄ Young Generation
‚îÇ    ‚îú‚îÄ‚îÄ Eden Space
‚îÇ    ‚îú‚îÄ‚îÄ Survivor Space 1 (S0)
‚îÇ    ‚îî‚îÄ‚îÄ Survivor Space 2 (S1)
‚îî‚îÄ‚îÄ Old Generation (Tenured Space)
```

_–°–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä—ë—Ö —á–∞—Å—Ç–µ–π:_

1. **Eden Space** ‚Äî –º–µ—Å—Ç–æ, –≥–¥–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤—Å–µ –Ω–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã.
2. **Survivor Space 0 (S0)** ‚Äî "–ø–µ—Ä–µ–∂–∏–≤—à–∏–µ" –æ–±—ä–µ–∫—Ç—ã –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π —Å–±–æ—Ä–∫–∏ –º—É—Å–æ—Ä–∞.
3. **Survivor Space 1 (S1)** ‚Äî –≤—Ç–æ—Ä–∞—è –∑–æ–Ω–∞ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –≤—ã–∂–∏–≤—à–∏—Ö
   –æ–±—ä–µ–∫—Ç–æ–≤.

_–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?_

1. **–°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞** ‚ûî –æ–Ω –ø–æ–ø–∞–¥–∞–µ—Ç –≤ **Eden**.
2. –ö–æ–≥–¥–∞ **Eden** –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è ‚ûî –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç **Minor GC** (–º–∞–ª–µ–Ω—å–∫–∞—è —Å–±–æ—Ä–∫–∞
   –º—É—Å–æ—Ä–∞).
    - –í—Å–µ **–Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ** –æ–±—ä–µ–∫—Ç—ã –≤ Eden —É–¥–∞–ª—è—é—Ç—Å—è.
    - **–í—ã–∂–∏–≤—à–∏–µ** –ø–µ—Ä–µ–º–µ—â–∞—é—Ç—Å—è –≤ –æ–¥–∏–Ω –∏–∑ **Survivor**-—Å–ø–µ–π—Å–æ–≤.
3. –ü–æ—Å–ª–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–±–æ—Ä–æ–∫ (–ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É S0 –∏ S1):
    - –ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç –≤—Å—ë –µ—â—ë –∂–∏–≤ ‚ûî –æ–Ω **–ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –≤ Old Generation**.

_–¶–∏–∫–ª –∂–∏–∑–Ω–∏ –º–æ–ª–æ–¥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞:_

```
[–°–æ–∑–¥–∞–Ω–∏–µ] ‚Üí Eden ‚Üí Minor GC ‚Üí Survivor 0 ‚Üí Survivor 1 ‚Üí ... ‚Üí Old Generation
```

–ù–µ–º–Ω–æ–≥–æ –ø–æ–¥—Ä–æ–±–Ω–µ–µ –ø—Ä–æ —Å–±–æ—Ä–∫–∏:

- **Minor GC** ‚Äî –±—ã—Å—Ç—Ä–∞—è —Å–±–æ—Ä–∫–∞, —Ç–æ–ª—å–∫–æ Young Gen.
- **Major GC (–∏–ª–∏ Full GC)** ‚Äî –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç –∏ Young, –∏ Old Gen. –î–æ–ª–≥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è!

_–í–∏–∑—É–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ (—É–ø—Ä–æ—â—ë–Ω–Ω–æ):_

```
–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ ‚Üí Eden  
Eden –∑–∞–ø–æ–ª–Ω–∏–ª—Å—è ‚Üí Minor GC  
–í—ã–∂–∏–≤—à–∏–µ ‚Üí Survivor 0  
–í—ã–∂–∏–≤—à–∏–µ ‚Üí Survivor 1  
–ú–Ω–æ–≥–æ –≤—ã–∂–∏–ª–∏? ‚Üí Old Generation
```

_–ò—Ç–æ–≥:_

| –¢–µ—Ä–º–∏–Ω               | –ß—Ç–æ –∑–Ω–∞—á–∏—Ç                            |
|:---------------------|:--------------------------------------|
| **Young Generation** | –ü–∞–º—è—Ç—å –¥–ª—è –Ω–µ–¥–∞–≤–Ω–æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ |
| **Eden Space**       | –ú–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤         |
| **Survivor Spaces**  | –ü–µ—Ä–µ—Ö–æ–¥–Ω–∞—è –∑–æ–Ω–∞ –¥–ª—è –≤—ã–∂–∏–≤—à–∏—Ö          |
| **Minor GC**         | –ë—ã—Å—Ç—Ä–∞—è –æ—á–∏—Å—Ç–∫–∞ –º–æ–ª–æ–¥—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤      |
| **Promotion**        | –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –≤ Old Gen         |

##### **–°—Ç–∞—Ä–æ–µ –ø–æ–∫–æ–ª–µ–Ω–∏–µ (Old Gen)**

- –ó–¥–µ—Å—å —Ö—Ä–∞–Ω—è—Ç—Å—è –æ–±—ä–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ "–ø–µ—Ä–µ–∂–∏–ª–∏" –º–Ω–æ–≥–æ —Ü–∏–∫–ª–æ–≤ —Å–±–æ—Ä–∫–∏ –º—É—Å–æ—Ä–∞.
- –°—Ç–∞—Ä—ã–µ –æ–±—ä–µ–∫—Ç—ã —Ä–µ–¥–∫–æ —É–±–∏—Ä–∞—é—Ç—Å—è => —Å–±–æ—Ä–∫–∞ –º—É—Å–æ—Ä–∞ –∑–¥–µ—Å—å –º–µ–¥–ª–µ–Ω–Ω–µ–µ.

**–°—Ç–∞—Ä–æ–µ –ø–æ–∫–æ–ª–µ–Ω–∏–µ** –≤ Java Heap ‚Äî —ç—Ç–æ –æ–±–ª–∞—Å—Ç—å –ø–∞–º—è—Ç–∏, –≥–¥–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è
–¥–æ–ª–≥–æ–∂–∏–≤—É—â–∏–µ –æ–±—ä–µ–∫—Ç—ã.<br>
–¢—É–¥–∞ –ø–æ–ø–∞–¥–∞—é—Ç —Ç–µ –æ–±—ä–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ:

- **–ü–µ—Ä–µ–∂–∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–±–æ—Ä–æ–∫ –º—É—Å–æ—Ä–∞** –≤ –º–æ–ª–æ–¥–æ–º –ø–æ–∫–æ–ª–µ–Ω–∏–∏ (Young Gen),
- **–ò—Ö –≤–æ–∑—Ä–∞—Å—Ç (`age`) –ø—Ä–µ–≤—ã—Å–∏–ª –ø–æ—Ä–æ–≥** (`MaxTenuringThreshold`).

**–ò–¥–µ—è:**  
–ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç –∂–∏–≤—ë—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–æ–ª–≥–æ, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –æ–Ω –µ—â—ë –¥–æ–ª–≥–æ –±—É–¥–µ—Ç –Ω—É–∂–µ–Ω ‚ûî –µ–≥–æ
–ø–µ—Ä–µ–º–µ—â–∞—é—Ç –≤ Old Gen, —á—Ç–æ–±—ã –Ω–µ —Ç—Ä–æ–≥–∞—Ç—å —á–∞—Å—Ç–æ.

_–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–º—è—Ç–∏:_

```
Heap Memory
‚îú‚îÄ‚îÄ Young Generation
‚îÇ    ‚îú‚îÄ‚îÄ Eden
‚îÇ    ‚îú‚îÄ‚îÄ Survivor 0 (S0)
‚îÇ    ‚îî‚îÄ‚îÄ Survivor 1 (S1)
‚îî‚îÄ‚îÄ Old Generation (Tenured Space)   ‚Üê —Å—Ç–∞—Ä—ã–µ –æ–±—ä–µ–∫—Ç—ã –∑–¥–µ—Å—å!
```

_–ö–∞–∫ –æ–±—ä–µ–∫—Ç—ã –ø–æ–ø–∞–¥–∞—é—Ç –≤ Old Gen?_

1. –ù–æ–≤—ã–π –æ–±—ä–µ–∫—Ç —Å–æ–∑–¥–∞—ë—Ç—Å—è ‚ûî –ø–æ–ø–∞–¥–∞–µ—Ç –≤ Eden.
2. –ü–æ—Å–ª–µ Minor GC:
    - –ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç **–≤—ã–∂–∏–ª**, –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ Survivor.
    - –ü—Ä–∏ –∫–∞–∂–¥–æ–º —Å–ª–µ–¥—É—é—â–µ–º Minor GC –µ–≥–æ –≤–æ–∑—Ä–∞—Å—Ç —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è.
3. –ö–æ–≥–¥–∞ –≤–æ–∑—Ä–∞—Å—Ç –æ–±—ä–µ–∫—Ç–∞ >= MaxTenuringThreshold ‚ûî
    - **–û–±—ä–µ–∫—Ç –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –≤ Old Generation** (promotion).

_–ß—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ Old Gen?_

- –°–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (`HttpSession`).
- –î–æ–ª–≥–æ–∂–∏–≤—É—â–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ (`Map`, `List`), –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫—ç—à.
- –î–∞–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã).

_–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å–æ –°—Ç–∞—Ä—ã–º –ø–æ–∫–æ–ª–µ–Ω–∏–µ–º:_

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | –î–µ—Ç–∞–ª–∏                                                                          |
|:---------------|:--------------------------------------------------------------------------------|
| –†–∞–∑–º–µ—Ä         | –û–±—ã—á–Ω–æ –±–æ–ª—å—à–µ, —á–µ–º Young Gen.                                                   |
| –ß–∞—Å—Ç–æ—Ç–∞ GC     | –†–µ–∂–µ, —á–µ–º –≤ Young Gen.                                                          |
| –¢–∏–ø GC         | **Major GC** –∏–ª–∏ **Full GC** (–º–µ–¥–ª–µ–Ω–Ω—ã–µ, –º–æ–≥—É—Ç –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ).    |
| –ê–ª–≥–æ—Ä–∏—Ç–º—ã      | –û–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–º–∞—Ä–∫–∏—Ä–æ–≤–∫–∞ –∏ —Å–∂–∞—Ç–∏–µ** (`Mark-Compact`), –∞ –Ω–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ. |

_–ö–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–±–æ—Ä–∫–∞ –º—É—Å–æ—Ä–∞ –≤ Old Gen?_

- –ö–æ–≥–¥–∞ **Old Gen –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è**, –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è **Major GC**.
- –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç Minor GC (—Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –≤ Young Gen), Major GC:
    - –ü—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ –≤—Å–µ–π –ø–∞–º—è—Ç–∏.
    - –ù–∞—Ö–æ–¥–∏—Ç –∂–∏–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã.
    - **–ö–æ–º–ø–∞–∫—Ç–∏—Ä—É–µ—Ç** –∂–∏–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã –≤ –æ–¥–Ω—É —á–∞—Å—Ç—å –∫—É—á–∏ (—É–±–∏—Ä–∞–µ—Ç "–¥—ã—Ä—ã" –ø–∞–º—è—Ç–∏).
    - –ú–æ–∂–µ—Ç **–∑–∞–º–æ—Ä–æ–∑–∏—Ç—å –≤—Å–µ –ø–æ—Ç–æ–∫–∏** (`Stop The World`).

–≠—Ç–æ –±–æ–ª–µ–µ —Ç—è–∂—ë–ª–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è, —á–µ–º –æ–±—ã—á–Ω—ã–π Minor GC, –ø–æ—ç—Ç–æ–º—É —Å—Ç–∞—Ä–æ–µ –ø–æ–∫–æ–ª–µ–Ω–∏–µ
—Å—Ç–∞—Ä–∞—é—Ç—Å—è –∑–∞–ø–æ–ª–Ω—è—Ç—å –∫–∞–∫ –º–æ–∂–Ω–æ —Ä–µ–∂–µ.

#### Stack (–°—Ç–µ–∫)

- –ö–∞–∂–¥—ã–π –ø–æ—Ç–æ–∫ –∏–º–µ–µ—Ç **—Å–≤–æ–π —Å—Ç–µ–∫**.
- –ü—Ä–∏ –≤—ã–∑–æ–≤–µ –º–µ—Ç–æ–¥–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è **Stack Frame**:
    - –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
    - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–µ—Ç–æ–¥–∞
    - –ê–¥—Ä–µ—Å –≤–æ–∑–≤—Ä–∞—Ç–∞
- –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º–µ—Ç–æ–¥–∞ –µ–≥–æ —Å—Ç–µ–∫-—Ñ—Ä–µ–π–º **—É–¥–∞–ª—è–µ—Ç—Å—è**.

**–í–∞–∂–Ω–æ**: –æ–±—ä–µ–∫—Ç—ã –≤ —Å—Ç–µ–∫–µ –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è ‚Äî —Ç–æ–ª—å–∫–æ **—Å—Å—ã–ª–∫–∏** –Ω–∞ –Ω–∏—Ö, –µ—Å–ª–∏ –µ—Å—Ç—å.

**–°—Ç–µ–∫ –ø–∞–º—è—Ç–∏** ‚Äî —ç—Ç–æ **–æ–±–ª–∞—Å—Ç—å –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏**, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–¥–µ–ª—è–µ—Ç—Å—è –¥–ª—è:

- —Ö—Ä–∞–Ω–µ–Ω–∏—è **–≤—ã–∑–æ–≤–æ–≤ –º–µ—Ç–æ–¥–æ–≤**,
- —Ö—Ä–∞–Ω–µ–Ω–∏—è **–ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö**,
- —Ö—Ä–∞–Ω–µ–Ω–∏—è **–∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–µ—Ç–æ–¥–æ–≤, —Å—Å—ã–ª–∫–∏ –Ω–∞
  –æ–±—ä–µ–∫—Ç—ã).

–ö–∞–∂–¥—ã–π –ø–æ—Ç–æ–∫ (`Thread`) –≤ Java –∏–º–µ–µ—Ç **—Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å—Ç–µ–∫**.  
–¢–æ –µ—Å—Ç—å —É –∫–∞–∂–¥–æ–≥–æ –ø–æ—Ç–æ–∫–∞ ‚Äî **–æ—Ç–¥–µ–ª—å–Ω–∞—è** –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–∞–º—è—Ç—å –ø–æ–¥ –≤—ã–∑–æ–≤—ã —Å–≤–æ–∏—Ö
–º–µ—Ç–æ–¥–æ–≤.

_–ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω —Å—Ç–µ–∫?_

–†–∞–±–æ—Ç–∞–µ—Ç –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É **"–ø–æ—Å–ª–µ–¥–Ω–∏–º –ø—Ä–∏—à—ë–ª ‚Äî –ø–µ—Ä–≤—ã–º —É—à—ë–ª"** (LIFO: Last In ‚Äî First
Out).

–ö–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –º–µ—Ç–æ–¥:

1. –°–æ–∑–¥–∞—ë—Ç—Å—è **–Ω–æ–≤–∞—è –∑–∞–ø–∏—Å—å –≤ —Å—Ç–µ–∫–µ** (`Stack Frame`).
2. –í –Ω–µ—ë –ø–æ–º–µ—â–∞—é—Ç—Å—è:
    - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–µ—Ç–æ–¥–∞,
    - –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ,
    - –°—Å—ã–ª–∫–∏ –Ω–∞ –¥—Ä—É–≥–∏–µ –æ–±—ä–µ–∫—Ç—ã,
    - –ù–µ–∫–æ—Ç–æ—Ä–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–æ–∑–≤—Ä–∞—Ç–µ.

–ö–æ–≥–¥–∞ –º–µ—Ç–æ–¥ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è:

- –ï–≥–æ —Å—Ç–µ–∫-—Ñ—Ä–µ–π–º —É–¥–∞–ª—è–µ—Ç—Å—è ("–≤—ã–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è" –∏–∑ —Å—Ç–µ–∫–∞).

_–ß—Ç–æ –∏–º–µ–Ω–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Å—Ç–µ–∫–µ:_

| –≠–ª–µ–º–µ–Ω—Ç              | –û–ø–∏—Å–∞–Ω–∏–µ                                                    |
|:---------------------|:------------------------------------------------------------|
| –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–µ—Ç–æ–¥–∞     | –ü–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏ –≤—ã–∑–æ–≤–µ                              |
| –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ | –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥–∞                                |
| –ê–¥—Ä–µ—Å –≤–æ–∑–≤—Ä–∞—Ç–∞       | –ö—É–¥–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–µ—Ç–æ–¥–∞                     |
| –°—Å—ã–ª–∫–∏ –Ω–∞ –æ–±—ä–µ–∫—Ç—ã    | –°–∞–º–∏ –æ–±—ä–µ–∫—Ç—ã –ª–µ–∂–∞—Ç –≤ –∫—É—á–µ (Heap), –∞ —Å—Å—ã–ª–∫–∏ –Ω–∞ –Ω–∏—Ö ‚Äî –≤ —Å—Ç–µ–∫–µ |

–ü—Ä–∏–º–µ—Ä: –∫–∞–∫ —Ä–∞—Å—Ç—ë—Ç —Å—Ç–µ–∫

```java
public class StackExample {
    public static void main(String[] args) {
        int result = add(2, 3);
        System.out.println(result);
    }

    public static int add(int a, int b) {
        return a + b;
    }
}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –ø–∞–º—è—Ç–∏:**

1. `main()` –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è ‚Üí —Å–æ–∑–¥–∞–µ—Ç—Å—è —Ñ—Ä–µ–π–º –¥–ª—è `main()`.
2. `add(2, 3)` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è ‚Üí –Ω–æ–≤—ã–π —Ñ—Ä–µ–π–º –¥–ª—è `add()`.
3. –í `add()` —Å–æ–∑–¥–∞—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `a=2`, `b=3`.
4. `add()` –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ä–∞–±–æ—Ç—É ‚ûî –µ–≥–æ —Ñ—Ä–µ–π–º —É–¥–∞–ª—è–µ—Ç—Å—è.
5. `main()` –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É.

**StackOverflowError**

–ï—Å–ª–∏ –º–µ—Ç–æ–¥ –≤—ã–∑—ã–≤–∞–µ—Ç —Å–∞–º —Å–µ–±—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ (—Ä–µ–∫—É—Ä—Å–∏—è –±–µ–∑ –≤—ã—Ö–æ–¥–∞), —Å—Ç–µ–∫
–ø–µ—Ä–µ–ø–æ–ª–Ω—è–µ—Ç—Å—è:

```java
public class OverflowExample {
    public static void endless() {
        endless(); // –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π –≤—ã–∑–æ–≤
    }

    public static void main(String[] args) {
        endless();
    }
}
```

**–û—à–∏–±–∫–∞:**

```
Exception in thread "main" java.lang.StackOverflowError
```

–ü–æ—Ç–æ–º—É —á—Ç–æ —Å—Ç–µ–∫ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –ø–æ —Ä–∞–∑–º–µ—Ä—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1‚Äì2 –ú–ë –Ω–∞ –ø–æ—Ç–æ–∫, –º–æ–∂–Ω–æ
–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —á–µ—Ä–µ–∑ `-Xss`).

_–í–∞–∂–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Å—Ç–µ–∫–∞:_

| –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å           | –ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç                                                                   |
|:----------------------|:-------------------------------------------------------------------------------|
| –ë—ã—Å—Ç—Ä–∞—è —Ä–∞–±–æ—Ç–∞        | –°—Ç–µ–∫ ‚Äî –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä—ã–π (–ø–∞–º—è—Ç—å –≤—ã–¥–µ–ª—è–µ—Ç—Å—è –∏ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è –∑–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω–æ–µ –≤—Ä–µ–º—è). |
| –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–æ—Ç–æ–∫–æ–≤  | –£ –∫–∞–∂–¥–æ–≥–æ –ø–æ—Ç–æ–∫–∞ —Å–≤–æ–π —Å—Ç–µ–∫ ‚ûî –Ω–µ—Ç –≥–æ–Ω–æ–∫ –∑–∞ –ø–∞–º—è—Ç—å.                              |
| –ñ–∏–≤—ë—Ç –≤–æ –≤—Ä–µ–º—è –≤—ã–∑–æ–≤–∞ | –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ –ø–æ–∫–∞ –∂–∏–≤ –º–µ—Ç–æ–¥.                                   |

_–°—Ä–∞–≤–Ω–µ–Ω–∏–µ Stack vs Heap_

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | Stack                           | Heap                   |
|:---------------|:--------------------------------|:-----------------------|
| –°–æ–¥–µ—Ä–∂–∏–º–æ–µ     | –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã | –û–±—ä–µ–∫—Ç—ã, –º–∞—Å—Å–∏–≤—ã       |
| –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª | –î–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º–µ—Ç–æ–¥–∞            | –ü–æ–∫–∞ –æ–±—ä–µ–∫—Ç –¥–æ—Å—Ç–∏–∂–∏–º   |
| –î–æ—Å—Ç—É–ø         | –ë—ã—Å—Ç—Ä—ã–π (LIFO)                  | –ú–µ–¥–ª–µ–Ω–Ω—ã–π (–ø–æ —Å—Å—ã–ª–∫–∞–º) |
| –†–∞–∑–º–µ—Ä         | –ú–∞–ª–µ–Ω—å–∫–∏–π                       | –ë–æ–ª—å—à–æ–π                |
| –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ     | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏                   | –°–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞ (GC)    |

–ú–∏–Ω–∏-—Å—Ö–µ–º–∞:

```
Stack Memory (–ø–æ—Ç–æ–∫ 1)
‚îî‚îÄ main() frame
   ‚îî‚îÄ –≤—ã–∑–≤–∞–ª add()
      ‚îî‚îÄ frame add()
         ‚îî‚îÄ –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: a=2, b=3
Stack Memory (–ø–æ—Ç–æ–∫ 2)
‚îî‚îÄ —Å–≤–æ–π —Å—Ç–µ–∫
```

–ò—Ç–æ–≥–æ:

- **–°—Ç–µ–∫** ‚Äî –ø–∞–º—è—Ç—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–µ—Ç–æ–¥–∞.
- **–ë—ã—Å—Ç—Ä–∞—è** —Ä–∞–±–æ—Ç–∞ –∑–∞ —Å—á—ë—Ç –ø—Ä–æ—Å—Ç–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.
- **–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ—Ç–æ–∫–∞.
- –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö –≥–ª—É–±–æ–∫–∏—Ö –≤—ã–∑–æ–≤–æ–≤ ‚ûî –≤–æ–∑–º–æ–∂–µ–Ω `StackOverflowError`.

#### Metaspace (–†–∞–Ω—å—à–µ –±—ã–ª PermGen)

- –•—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –∫–ª–∞—Å—Å–∞—Ö: –Ω–∞–∑–≤–∞–Ω–∏—è, –º–µ—Ç–æ–¥—ã, –ø–æ–ª—è –∏ —Ç.–¥.
- –ù–∞—á–∏–Ω–∞—è —Å Java 8 –≤–º–µ—Å—Ç–æ PermGen –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **Metaspace**.
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç **–Ω–∞—Ç–∏–≤–Ω—É—é –ø–∞–º—è—Ç—å** (–Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ –∫—É—á–µ–π).

#### Code Cache

- –î–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã JIT-–∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –±–∞–π—Ç-–∫–æ–¥ –≤
  **–º–∞—à–∏–Ω–Ω—ã–π –∫–æ–¥**.
- –≠—Ç–æ—Ç –∫–æ–¥ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ **Code Cache**.

#### Direct Memory

- –û–±—Ö–æ–¥ –æ–±—ã—á–Ω–æ–π –∫—É—á–∏.
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä —á–µ—Ä–µ–∑
  `ByteBuffer.allocateDirect()`.
- –£–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é (Java NIO, Netty –∏ –ø—Ä.).

#### –í–∏–∑—É–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞

```plaintext
+---------------------------------------------------+
|                   –ü–∞–º—è—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–∞                 |
| +---------------------+  +----------------------+ |
| |    –°—Ç–µ–∫ –ø–æ—Ç–æ–∫–∞ 1    |  |   –°—Ç–µ–∫ –ø–æ—Ç–æ–∫–∞ 2      | |
| +---------------------+  +----------------------+ |
|                    –ö—É—á–∞ (Heap)                    |
|  +---------------------------------------------+  |
|  |  Young Gen (Eden + Survivor)                |  |
|  |  Old Gen                                    |  |
|  +---------------------------------------------+  |
|               –ú–µ—Ç–∞—Å–ø–µ–π—Å (Metaspace)               |
|               Code Cache                          |
|               Direct Memory                       |
+---------------------------------------------------+
```

**–í–∞–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å**

- Java —Å–∞–º–∞ —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–∞–º—è—Ç—å—é —á–µ—Ä–µ–∑ **GC**.
- StackOverflowError –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ —Å—Ç–µ–∫ —Å–ª–∏—à–∫–æ–º —Å–∏–ª—å–Ω–æ —Ä–∞–∑—Ä–∞—Å—Ç–∞–µ—Ç—Å—è
  (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–µ–∫—É—Ä—Å–∏—è –±–µ–∑ –≤—ã—Ö–æ–¥–∞).
- OutOfMemoryError –≤–æ–∑–Ω–∏–∫–∞–µ—Ç, –µ—Å–ª–∏ –∫—É—á–∞ –∏–ª–∏ –º–µ—Ç–∞—Å–ø–µ–π—Å –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω—ã.

## –°–±–æ—Ä–∫–∞ –º—É—Å–æ—Ä–∞

#### –ß—Ç–æ —Ç–∞–∫–æ–µ —Å–±–æ—Ä–∫–∞ –º—É—Å–æ—Ä–∞?

**Garbage Collection** ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º –≤ Java, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ **–Ω–∞—Ö–æ–¥–∏—Ç –∏
—É–¥–∞–ª—è–µ—Ç –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –æ–±—ä–µ–∫—Ç—ã** –∏–∑ –ø–∞–º—è—Ç–∏, —á—Ç–æ–±—ã –æ—Å–≤–æ–±–æ–¥–∏—Ç—å –º–µ—Å—Ç–æ.

**–ò–¥–µ—è:** –µ—Å–ª–∏ –Ω–∞ –æ–±—ä–µ–∫—Ç **–Ω–µ—Ç –±–æ–ª—å—à–µ —Å—Å—ã–ª–æ–∫**, –∑–Ω–∞—á–∏—Ç, –æ–Ω **–±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω**,
–∏ –µ–≥–æ –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ —É–¥–∞–ª–∏—Ç—å.

#### –û—Å–Ω–æ–≤–Ω—ã–µ —ç—Ç–∞–ø—ã —Ä–∞–±–æ—Ç—ã GC

1. **–ú–∞—Ä–∫–∏—Ä–æ–≤–∫–∞ (Marking):**
    - GC –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ –≤—Å–µ–º "–∂–∏–≤—ã–º" –æ–±—ä–µ–∫—Ç–∞–º, –Ω–∞—á–∏–Ω–∞—è —Å –∫–æ—Ä–Ω–µ–π (`GC roots`) –∏
      –ø–æ–º–µ—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –∫–∞–∫ –∂–∏–≤—ã–µ.
2. **–£–¥–∞–ª–µ–Ω–∏–µ (Sweeping):**
    - –í—Å–µ –Ω–µ–º–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã —Å—á–∏—Ç–∞—é—Ç—Å—è –º—É—Å–æ—Ä–æ–º –∏ —É–¥–∞–ª—è—é—Ç—Å—è.
3. **–ö–æ–º–ø–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (Compacting) (–∏–Ω–æ–≥–¥–∞):**
    - –ü–µ—Ä–µ–º–µ—â–∞–µ—Ç –∂–∏–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã, —á—Ç–æ–±—ã —É–±—Ä–∞—Ç—å –ø—É—Å—Ç—ã–µ –ø—Ä–æ–º–µ–∂—É—Ç–∫–∏ –∏ —É–º–µ–Ω—å—à–∏—Ç—å
      —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—é –ø–∞–º—è—Ç–∏.

### –ß—Ç–æ —Ç–∞–∫–æ–µ GC roots?

**GC Roots** ‚Äî —ç—Ç–æ –Ω–∞—á–∞–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏, –æ—Ç–∫—É–¥–∞ GC –Ω–∞—á–∏–Ω–∞–µ—Ç –∏—Å–∫–∞—Ç—å –∂–∏–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã.
–ü—Ä–∏–º–µ—Ä—ã:

- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è (`static`)
- –°—Ç–µ–∫–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥–æ–≤
- –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ—Ç–æ–∫–∏
- –°—Å—ã–ª–∫–∏ –≤–Ω—É—Ç—Ä–∏ JNI

**GC Root** ‚Äî —ç—Ç–æ **—Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è —Ç–æ—á–∫–∞ –æ—Ç—Å—á—ë—Ç–∞** –¥–ª—è —Å–±–æ—Ä—â–∏–∫–∞ –º—É—Å–æ—Ä–∞ (**Garbage
Collector**), –æ—Ç–∫—É–¥–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –ø–æ–∏—Å–∫ **–∂–∏–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤** –≤ –ø–∞–º—è—Ç–∏.

**–ü—Ä–æ—â–µ –≥–æ–≤–æ—Ä—è:**  
–ö–æ–≥–¥–∞ —Å–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞ –∏—â–µ—Ç, –∫–∞–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å, –æ–Ω —Å–Ω–∞—á–∞–ª–∞ —Å–º–æ—Ç—Ä–∏—Ç,
**–∫–∞–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –∏–∑ GC Roots**.  
–í—Å–µ –æ–±—ä–µ–∫—Ç—ã, **–∫–æ—Ç–æ—Ä—ã–µ –¥–æ—Å—Ç–∏–∂–∏–º—ã** (—á–µ—Ä–µ–∑ —Ü–µ–ø–æ—á–∫—É —Å—Å—ã–ª–æ–∫) –æ—Ç GC Roots, —Å—á–∏—Ç–∞—é—Ç—Å—è
**–∂–∏–≤—ã–º–∏**.  
–û—Å—Ç–∞–ª—å–Ω—ã–µ ‚Äî **–º—É—Å–æ—Ä** ‚ûî –∏—Ö –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å.

**–ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è:**

**–ï—Å–ª–∏ –Ω–∞ –æ–±—ä–µ–∫—Ç –µ—Å—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–Ω–∞ —Ü–µ–ø–æ—á–∫–∞ —Å—Å—ã–ª–æ–∫ –æ—Ç GC Root ‚Äî –æ–Ω –∂–∏–≤–æ–π.**  
**–ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –µ–≥–æ –º–æ–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å –∏ –æ—Å–≤–æ–±–æ–¥–∏—Ç—å –ø–∞–º—è—Ç—å.**

**–ö–∞–∫–∏–µ –±—ã–≤–∞—é—Ç GC Roots?**

–í Java –≤ —Ä–æ–ª–∏ **GC Root** –≤—ã—Å—Ç—É–ø–∞—é—Ç:

| –¢–∏–ø GC Root                          | –û–ø–∏—Å–∞–Ω–∏–µ                                                                      |
|:-------------------------------------|:------------------------------------------------------------------------------|
| **–°—Å—ã–ª–∫–∏ –∏–∑ —Å—Ç–µ–∫–∞ –ø–æ—Ç–æ–∫–æ–≤**          | –í—Å–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–µ—Ç–æ–¥–æ–≤ –≤ —Å—Ç–µ–∫–µ –ø–æ—Ç–æ–∫–∞.                  |
| **–°—Å—ã–ª–∫–∏ –∏–∑ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö** | –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è –∫–ª–∞—Å—Å–æ–≤ (`static` –ø–æ–ª—è).                                     |
| **–°—Å—ã–ª–∫–∏ –∏–∑ –∫–ª–∞—Å—Å–æ–≤**                | –ö–ª–∞—Å—Å—ã, –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ ClassLoader'—ã.                          |
| **–°—Å—ã–ª–∫–∏ –æ—Ç JNI**                    | –û–±—ä–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–∞—Ç–∏–≤–Ω—ã–º –∫–æ–¥–æ–º (—á–µ—Ä–µ–∑ Java Native Interface).   |
| **–ú–µ–Ω–µ–¥–∂–µ—Ä—ã JVM**                    | –ù–∞–ø—Ä–∏–º–µ—Ä, —Å–∏—Å—Ç–µ–º–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã (–ø—É–ª—ã –ø–æ—Ç–æ–∫–æ–≤, –∫–ª–∞—Å—Å—ã —Å–¥–µ—Ä–∂–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ —Ç.–¥.). |

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–±–æ—Ä–∫–∞ –º—É—Å–æ—Ä–∞ —á–µ—Ä–µ–∑ GC Roots:**

1. GC –Ω–∞—á–∏–Ω–∞–µ—Ç –æ–±—Ö–æ–¥ –≤—Å–µ—Ö GC Roots.
2. –ü–æ –∫–∞–∂–¥–æ–π —Å—Å—ã–ª–∫–µ –∏—â–µ—Ç, –∫–∞–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã –¥–æ—Å—Ç–∏–∂–∏–º—ã.
3. –°—Ç—Ä–æ–∏—Ç—Å—è –≥—Ä–∞—Ñ "–∂–∏–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤".
4. –í—Å—ë, –¥–æ —á–µ–≥–æ –Ω–µ–ª—å–∑—è –¥–æ–π—Ç–∏ ‚ûî **—Å–æ–±–∏—Ä–∞–µ—Ç—Å—è**.

–≠—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **"Tracing Garbage Collection"** (—Å–±–æ—Ä–∫–∞ –º—É—Å–æ—Ä–∞ —á–µ—Ä–µ–∑
—Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É —Å—Å—ã–ª–æ–∫).

**–ö—Ä–∞—Ç–∫–∏–π –ø—Ä–∏–º–µ—Ä:**

```java
public class GCRootExample {
    static Object staticObject;
    Object instanceObject;

    public static void main(String[] args) {
        GCRootExample example = new GCRootExample();
        staticObject = new Object();
        example.instanceObject = new Object();
        // –ó–¥–µ—Å—å staticObject –∏ instanceObject –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ GC Roots
    }
}
```

- `staticObject` ‚Äî –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ —Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é —Å—Å—ã–ª–∫—É (GC Root).
- `example.instanceObject` ‚Äî –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ –ª–æ–∫–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `example` –≤
  —Å—Ç–µ–∫–µ main-–ø–æ—Ç–æ–∫–∞ (GC Root —á–µ—Ä–µ–∑ —Å—Ç–µ–∫).

**–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ –∑–Ω–∞—Ç—å?**

- **–ü–æ–Ω–∏–º–∞–Ω–∏–µ GC Roots** –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ **–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏**.
- –í –ø—Ä–æ—Ñ–∞–π–ª–µ—Ä–∞—Ö –ø–∞–º—è—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, **VisualVM**, **YourKit**, **JProfiler**)
  –º–æ–∂–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å "–ø—É—Ç—å –∫ GC Root" ‚ûî —ç—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, **–ø–æ—á–µ–º—É –æ–±—ä–µ–∫—Ç –Ω–µ –º–æ–∂–µ—Ç
  –±—ã—Ç—å —Å–æ–±—Ä–∞–Ω**.

**–ï—Å–ª–∏ –∫–æ—Ä–æ—Ç–∫–æ:**

| –í–æ–ø—Ä–æ—Å                 | –û—Ç–≤–µ—Ç                                                   |
|:-----------------------|:--------------------------------------------------------|
| –ß—Ç–æ —Ç–∞–∫–æ–µ GC Root?     | –¢–æ—á–∫–∞, –æ—Ç–∫—É–¥–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –ø–æ–∏—Å–∫ –∂–∏–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤.          |
| –ö–∞–∫–∏–µ –±—ã–≤–∞—é—Ç GC Roots? | –°—Ç–µ–∫ –ø–æ—Ç–æ–∫–æ–≤, —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è, –∫–ª–∞—Å—Å—ã, JNI-—Å—Å—ã–ª–∫–∏.     |
| –ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ?          | –ü–æ–º–æ–≥–∞–µ—Ç –ø–æ–Ω–∏–º–∞—Ç—å —Å–±–æ—Ä–∫—É –º—É—Å–æ—Ä–∞ –∏ –∏—Å–∫–∞—Ç—å —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏. |

=================

## Garbage Collector. GCRoot

–í Java, GC Root (–∏–ª–∏ –∫–æ—Ä–µ–Ω—å —Å–±–æ—Ä—â–∏–∫–∞ –º—É—Å–æ—Ä–∞) ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è
–Ω–∞—á–∞–ª—å–Ω–æ–π —Ç–æ—á–∫–æ–π –¥–ª—è –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–±–æ—Ä–∫–∏ –º—É—Å–æ—Ä–∞ (Garbage Collection, GC). –°–±–æ—Ä—â–∏–∫
–º—É—Å–æ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ—Ä–Ω–∏ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, –∫–∞–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã –≤ –ø–∞–º—è—Ç–∏ –≤—Å–µ –µ—â–µ –¥–æ—Å—Ç—É–ø–Ω—ã
–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã, –∞ –∫–∞–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω—ã –∏ –º–æ–≥—É—Ç –±—ã—Ç—å —É–¥–∞–ª–µ–Ω—ã.

–ß—Ç–æ —Ç–∞–∫–æ–µ GC Root?<br>
GC Root ‚Äî —ç—Ç–æ –Ω–∞–±–æ—Ä –æ–±—ä–µ–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω—ã –∏ —Å–ª—É–∂–∞—Ç –æ—Ç–ø—Ä–∞–≤–Ω–æ–π —Ç–æ—á–∫–æ–π
–¥–ª—è –ø–æ–∏—Å–∫–∞ –≤—Å–µ—Ö –¥–æ—Å—Ç–∏–∂–∏–º—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –ø–∞–º—è—Ç–∏. –ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å
–¥–æ—Å—Ç–∏–≥–Ω—É—Ç –∏–∑ –ª—é–±–æ–≥–æ –∏–∑ –∫–æ—Ä–Ω–µ–π, –æ–Ω —Å—á–∏—Ç–∞–µ—Ç—Å—è "–º—É—Å–æ—Ä–æ–º" –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å —É–¥–∞–ª–µ–Ω
—Å–±–æ—Ä—â–∏–∫–æ–º –º—É—Å–æ—Ä–∞.

–ü—Ä–∏–º–µ—Ä—ã GC Root<br>
–í–æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–º–µ—Ä–æ–≤ –æ–±—ä–µ–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Å—á–∏—Ç–∞—é—Ç—Å—è GC Root:<br>

- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è:<br>
  –û–±—ä–µ–∫—Ç—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ —Å—Å—ã–ª–∞—é—Ç—Å—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è –∫–ª–∞—Å—Å–æ–≤. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —É –≤–∞—Å
  –µ—Å—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª–µ –≤ –∫–ª–∞—Å—Å–µ, –∫–æ—Ç–æ—Ä–æ–µ —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ –æ–±—ä–µ–∫—Ç, —ç—Ç–æ—Ç –æ–±—ä–µ–∫—Ç –±—É–¥–µ—Ç
  —è–≤–ª—è—Ç—å—Å—è –∫–æ—Ä–Ω–µ–º.
- –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ—Ç–æ–∫–∏:<br>
  –û–±—ä–µ–∫—Ç—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–µ–∫—É—â–∏–π –ø–æ—Ç–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è).
- –û–±—ä–µ–∫—Ç—ã –≤ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:<br>
  –û–±—ä–µ–∫—Ç—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ —Å—Å—ã–ª–∞—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥–æ–≤. –ü–æ–∫–∞ –º–µ—Ç–æ–¥
  –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Å—Ç–µ–∫–µ –≤—ã–∑–æ–≤–æ–≤, —ç—Ç–∏ –æ–±—ä–µ–∫—Ç—ã
  —Å—á–∏—Ç–∞—é—Ç—Å—è –¥–æ—Å—Ç–∏–∂–∏–º—ã–º–∏.
- JNI —Å—Å—ã–ª–∫–∏:<br>
  –û–±—ä–µ–∫—Ç—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ —Å—Å—ã–ª–∞—é—Ç—Å—è –Ω–∞—Ç–∏–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã —á–µ—Ä–µ–∑ Java Native Interface (
  JNI).
- –û–±—ä–µ–∫—Ç—ã –∫–ª–∞—Å—Å–∞ java.lang.Runtime:<br>
  –û–±—ä–µ–∫—Ç Runtime, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ä–µ–¥–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è Java.

–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–±–æ—Ä–∫–∞ –º—É—Å–æ—Ä–∞?<br>
–°–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º—ã –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–æ—Å—Ç–∏–∂–∏–º–æ—Å—Ç–∏ –æ–±—ä–µ–∫—Ç–æ–≤:

1. –ù–∞—á–∏–Ω–∞–µ—Ç —Å GC Roots: –°–±–æ—Ä—â–∏–∫ –Ω–∞—á–∏–Ω–∞–µ—Ç —Å –æ–±—ä–µ–∫—Ç–æ–≤ GC Root –∏ –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ –≤—Å–µ–º
   —Å—Å—ã–ª–∫–∞–º –æ—Ç —ç—Ç–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤.
2. –û–±—Ö–æ–¥–∏—Ç –≥—Ä–∞—Ñ –æ–±—ä–µ–∫—Ç–æ–≤: –û–Ω —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ
   —Å—Å—ã–ª–∞—é—Ç—Å—è –∫–æ—Ä–Ω–∏.
3. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–µ–¥–æ—Å—Ç–∏–∂–∏–º—ã–µ –æ–±—ä–µ–∫—Ç—ã: –í—Å–µ –æ–±—ä–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å
   –¥–æ—Å—Ç–∏–≥–Ω—É—Ç—ã –∏–∑ –∫–æ—Ä–Ω–µ–π, –ø–æ–º–µ—á–∞—é—Ç—Å—è –∫–∞–∫ "–º—É—Å–æ—Ä" –∏ –ø–æ–¥–ª–µ–∂–∞—Ç —É–¥–∞–ª–µ–Ω–∏—é.

–í–∞–∂–Ω–æ—Å—Ç—å GC Root<br>
–ü–æ–Ω–∏–º–∞–Ω–∏–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ GC Root –≤–∞–∂–Ω–æ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
–ø–∞–º—è—Ç—å—é:<br>

1. –ü–æ–º–æ–≥–∞–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –∏–∑–±–µ–≥–∞—Ç—å —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏.
2. –ü–æ–∑–≤–æ–ª—è–µ—Ç –ª—É—á—à–µ –ø–æ–Ω–∏–º–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–±–æ—Ä—â–∏–∫–∞ –º—É—Å–æ—Ä–∞.
3. –°–ø–æ—Å–æ–±—Å—Ç–≤—É–µ—Ç –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é —Ä–µ—Å—É—Ä—Å–∞–º–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö.

–ö–∞–∫ –ø–æ–º–µ—Ç–∏—Ç—å –æ–±—ä–µ–∫—Ç "–∂–∏–≤—ã–º"<br>
–í Java –æ–±—ä–µ–∫—Ç—ã –ø–æ–º–µ—á–∞—é—Ç—Å—è –∫–∞–∫ "–∂–∏–≤—ã–µ" (–∏–ª–∏ "–¥–æ—Å—Ç–∏–∂–∏–º—ã–µ") –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —Å–±–æ—Ä–∫–∏
–º—É—Å–æ—Ä–∞ (Garbage Collection) –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Å—ã–ª–æ–∫ –Ω–∞ –Ω–∏—Ö. –ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑
–æ–¥–Ω—É –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Å—ã–ª–æ–∫, –æ–Ω —Å—á–∏—Ç–∞–µ—Ç—Å—è –∂–∏–≤—ã–º –∏ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —É–¥–∞–ª–µ–Ω —Å–±–æ—Ä—â–∏–∫–æ–º
–º—É—Å–æ—Ä–∞. –í–æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–±–æ–≤, –∫–∞–∫ –º–æ–∂–Ω–æ –ø–æ–º–µ—Ç–∏—Ç—å –æ–±—ä–µ–∫—Ç –∫–∞–∫ –∂–∏–≤–æ–π:

1. –°–æ–∑–¥–∞–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –Ω–∞ –æ–±—ä–µ–∫—Ç<br>
   –ß—Ç–æ–±—ã –æ–±—ä–µ–∫—Ç —Å—á–∏—Ç–∞–ª—Å—è –∂–∏–≤—ã–º, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É —Å—Å—ã–ª–∫—É –Ω–∞ –Ω–µ–≥–æ.
   –ù–∞–ø—Ä–∏–º–µ—Ä:

```java
class MyObject {
// –ü–æ–ª—è –∏ –º–µ—Ç–æ–¥—ã
}

public class Main {
    public static void main(String[] args) {
        MyObject obj = new MyObject(); // –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ –Ω–µ–≥–æ
// –û–±—ä–µ–∫—Ç obj —Å—á–∏—Ç–∞–µ—Ç—Å—è "–∂–∏–≤—ã–º", –ø–æ–∫–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Å—Å—ã–ª–∫–∞ –Ω–∞ –Ω–µ–≥–æ
    }
}
```

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ obj —è–≤–ª—è–µ—Ç—Å—è —Å—Å—ã–ª–∫–æ–π –Ω–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä MyObject, –∏ –ø–æ–∫–∞ —ç—Ç–∞ —Å—Å—ã–ª–∫–∞
—Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –æ–±—ä–µ–∫—Ç –±—É–¥–µ—Ç —Å—á–∏—Ç–∞—Ç—å—Å—è –∂–∏–≤—ã–º.

2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–π<br>
   –û–±—ä–µ–∫—Ç—ã –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ –∂–∏–≤—ã–µ, –µ—Å–ª–∏ –æ–Ω–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—è—Ö, —Ç–∞–∫–∏—Ö
   –∫–∞–∫ —Å–ø–∏—Å–∫–∏, –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∏–ª–∏ –∫–∞—Ä—Ç—ã:

```java
import java.util.ArrayList;
import java.util.List;

class MyObject {
    // –ü–æ–ª—è –∏ –º–µ—Ç–æ–¥—ã
}

public class Main {
    public static void main(String[] args) {
        List<MyObject> list = new ArrayList<>();
        MyObject obj = new MyObject();
        list.add(obj); // –û–±—ä–µ–∫—Ç obj —Ç–µ–ø–µ—Ä—å —Å—á–∏—Ç–∞–µ—Ç—Å—è "–∂–∏–≤—ã–º", —Ç–∞–∫ –∫–∞–∫ –æ–Ω —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ
    }
}
```

3. –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è<br>
   –ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–º –ø–æ–ª–µ –∫–ª–∞—Å—Å–∞, –æ–Ω —Ç–∞–∫–∂–µ –±—É–¥–µ—Ç —Å—á–∏—Ç–∞—Ç—å—Å—è
   –∂–∏–≤—ã–º:

```java
class MyClass {
    static MyObject staticObj = new MyObject(); // –°—Ç–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª–µ —Ö—Ä–∞–Ω–∏—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –æ–±—ä–µ–∫—Ç
}

public class Main {
    public static void main(String[] args) {
        // –û–±—ä–µ–∫—Ç staticObj —Å—á–∏—Ç–∞–µ—Ç—Å—è "–∂–∏–≤—ã–º" –±–ª–∞–≥–æ–¥–∞—Ä—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π —Å—Å—ã–ª–∫–µ
    }
}
```

4. –ü–µ—Ä–µ–¥–∞—á–∞ –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –º–µ—Ç–æ–¥—ã<br>
   –ö–æ–≥–¥–∞ –≤—ã –ø–µ—Ä–µ–¥–∞–µ—Ç–µ –æ–±—ä–µ–∫—Ç –≤ –º–µ—Ç–æ–¥, –æ–Ω —Ç–∞–∫–∂–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –∂–∏–≤—ã–º, –ø–æ–∫–∞ –º–µ—Ç–æ–¥
   –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è:

```java
class MyObject {
    // –ü–æ–ª—è –∏ –º–µ—Ç–æ–¥—ã
}

public class Main {
    public static void process(MyObject obj) {
        // –û–±—ä–µ–∫—Ç obj —Å—á–∏—Ç–∞–µ—Ç—Å—è "–∂–∏–≤—ã–º" –≤–Ω—É—Ç—Ä–∏ —ç—Ç–æ–≥–æ –º–µ—Ç–æ–¥–∞
    }

    public static void main(String[] args) {
        MyObject myObj = new MyObject();
        process(myObj); // –ü–µ—Ä–µ–¥–∞–µ–º –æ–±—ä–µ–∫—Ç –≤ –º–µ—Ç–æ–¥
    }
}

```

5. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤–Ω–µ—à–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ –∏–ª–∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤
   –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –º–æ–≥—É—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –æ–±—ä–µ–∫—Ç–æ–≤ –∏
   –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ –Ω–∏—Ö –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∏—Ö –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏.

–ó–∞–∫–ª—é—á–µ–Ω–∏–µ<br>
–û–±—ä–µ–∫—Ç—ã –≤ Java —Å—á–∏—Ç–∞—é—Ç—Å—è "–∂–∏–≤—ã–º–∏", –µ—Å–ª–∏ –Ω–∞ –Ω–∏—Ö —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Å—Å—ã–ª–∫–∏ –∏–∑ –¥—Ä—É–≥–∏—Ö
–æ–±—ä–µ–∫—Ç–æ–≤ –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö. –ß—Ç–æ–±—ã –ø–æ–º–µ—Ç–∏—Ç—å –æ–±—ä–µ–∫—Ç –∫–∞–∫ –∂–∏–≤–æ–π, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–æ–∑–¥–∞—Ç—å
—Ö–æ—Ç—è –±—ã –æ–¥–Ω—É —Å—Å—ã–ª–∫—É –Ω–∞ –Ω–µ–≥–æ ‚Äî —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª–æ–∫–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, —ç–ª–µ–º–µ–Ω—Ç
–∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∏–ª–∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª–µ –∫–ª–∞—Å—Å–∞. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –≤—Å–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–±—ä–µ–∫—Ç –±—É–¥—É—Ç
—É–¥–∞–ª–µ–Ω—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤—ã–π–¥—É—Ç –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∏–ª–∏ –±—É–¥—É—Ç –ø—Ä–∏—Å–≤–æ–µ–Ω—ã
null), –æ–±—ä–µ–∫—Ç —Å—Ç–∞–Ω–µ—Ç –Ω–µ–¥–æ—Å—Ç–∏–∂–∏–º—ã–º –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å —É–¥–∞–ª–µ–Ω —Å–±–æ—Ä—â–∏–∫–æ–º –º—É—Å–æ—Ä–∞.

GC Root ‚Äî —ç—Ç–æ –∫–ª—é—á–µ–≤–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è –≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –ø–∞–º—è—Ç—å—é Java –∏ —Å–±–æ—Ä–∫–µ –º—É—Å–æ—Ä–∞. –û–Ω–∞
–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞—á–∞–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞ –¥–æ—Å—Ç–∏–∂–∏–º—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –ø–æ–º–æ–≥–∞–µ—Ç —Å–±–æ—Ä—â–∏–∫—É
–º—É—Å–æ—Ä–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –æ—Å–≤–æ–±–æ–∂–¥–∞—Ç—å –ø–∞–º—è—Ç—å –æ—Ç –Ω–µ–Ω—É–∂–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤.

==============

## String Pool

**String Pool** ‚Äî —ç—Ç–æ –æ–¥–Ω–∞ –∏–∑ —Ñ–∏—à–µ–∫ Java, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç **–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å
—Ä–∞–±–æ—Ç—É —Å –ø–∞–º—è—Ç—å—é** –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Å—Ç—Ä–æ–∫.

**–ß—Ç–æ —Ç–∞–∫–æ–µ String Pool?**

**String Pool** ‚Äî —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±–ª–∞—Å—Ç—å –ø–∞–º—è—Ç–∏ –≤ –∫—É—á–µ (**Heap**), –≥–¥–µ Java
—Ö—Ä–∞–Ω–∏—Ç **—É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã —Å—Ç—Ä–æ–∫** (`String`).

**–ò–¥–µ—è:**  
–ï—Å–ª–∏ –¥–≤–µ —Å—Ç—Ä–æ–∫–∏ –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, **Java –Ω–µ —Å–æ–∑–¥–∞–µ—Ç –¥–≤–∞ –æ–±—ä–µ–∫—Ç–∞**, –∞
**–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ**.

–¢–æ –µ—Å—Ç—å:

`String a = "hello";`  
`String b = "hello";`

`a` –∏ `b` –±—É–¥—É—Ç —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ **–æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –æ–±—ä–µ–∫—Ç** –≤ –ø–∞–º—è—Ç–∏!

**–ì–¥–µ –∏–º–µ–Ω–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è String Pool?**

- –î–æ **Java 7**: String Pool –±—ã–ª –≤ **PermGen** (–æ–±–ª–∞—Å—Ç—å –¥–ª—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤).
- –ù–∞—á–∏–Ω–∞—è —Å **Java 7 –∏ –≤—ã—à–µ**: String Pool –ø–µ—Ä–µ–º–µ—Å—Ç–∏–ª–∏ –≤ **Heap** (–∫—É—á—É) –≤–º–µ—Å—Ç–µ
  —Å –æ–±—ã—á–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏.

–≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏–ª–æ –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–æ–∫, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º —Ä–∞–∑–º–µ—Ä–æ–º PermGen.

**–ö–∞–∫ —Å—Ç—Ä–æ–∫–∏ –ø–æ–ø–∞–¥–∞—é—Ç –≤ String Pool?**

1. –ï—Å–ª–∏ —Å—Ç—Ä–æ–∫–∞ —Å–æ–∑–¥–∞–Ω–∞ **–ª–∏—Ç–µ—Ä–∞–ª–æ–º** (`"someText"`), —Ç–æ Java —Å–Ω–∞—á–∞–ª–∞ –∏—â–µ—Ç —Å—Ç—Ä–æ–∫—É
   –≤ String Pool.
2. –ï—Å–ª–∏ —Ç–∞–∫–æ–π —Å—Ç—Ä–æ–∫–∏ –Ω–µ—Ç ‚Äî –æ–Ω–∞ **–¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è** —Ç—É–¥–∞.
3. –ï—Å–ª–∏ —Å—Ç—Ä–æ–∫–∞ **—É–∂–µ –µ—Å—Ç—å** ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—Ç—Ä–æ–∫—É.

–ü—Ä–∏–º–µ—Ä:

```java
void demo() {
    String a = "test";
    String b = "test";

    System.out.println(a == b); // true (–æ–Ω–∏ —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –æ–¥–∏–Ω –æ–±—ä–µ–∫—Ç)
}
```

**–ê –µ—Å–ª–∏ —Å–æ–∑–¥–∞—Ç—å —á–µ—Ä–µ–∑ `new`?**

```code
String a = new String("test");
String b = new String("test");
System.out.println(a ==b); // false (–¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–∞)
```

- `new String()` **–≤—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç** –≤ –∫—É—á–µ, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ,
  –µ—Å—Ç—å —Å—Ç—Ä–æ–∫–∞ –≤ –ø—É–ª–µ –∏–ª–∏ –Ω–µ—Ç.
- –ù–æ –º–æ–∂–Ω–æ –ø–æ—Ç–æ–º –¥–æ–±–∞–≤–∏—Ç—å —Ç–∞–∫—É—é —Å—Ç—Ä–æ–∫—É –≤ –ø—É–ª —è–≤–Ω–æ —á–µ—Ä–µ–∑ `.intern()`.

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –º–µ—Ç–æ–¥ `.intern()`?**

–ú–µ—Ç–æ–¥ `intern()`:

- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ —Å—Ç—Ä–æ–∫–∞ –≤ –ø—É–ª–µ.
- –ï—Å–ª–∏ –µ—Å—Ç—å ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—Ç—Ä–æ–∫—É.
- –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ –ø—É–ª.

–ü—Ä–∏–º–µ—Ä:

```java
String a = new String("hello").intern();
String b = "hello";

System.out.

println(a ==b); // true
```

–ü–æ—á–µ–º—É String Pool –≤–∞–∂–µ–Ω?

- **–≠–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏**: –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑.
- **–ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä–æ–∫**: –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `==`, –∞ –Ω–µ `equals()`, –µ—Å–ª–∏
  —Å—Ç—Ä–æ–∫–∏ –∏–Ω—Ç–µ—Ä–Ω–∏—Ä–æ–≤–∞–Ω—ã.
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**: –º–µ–Ω—å—à–µ –∑–∞—Ç—Ä–∞—Ç –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —Å–±–æ—Ä–∫—É –º—É—Å–æ—Ä–∞.

## JIT –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä

–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–Ω—è—Ç–Ω–æ. üöÄ

---

# üìö –ß—Ç–æ —Ç–∞–∫–æ–µ JIT-–∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –≤ Java?

**JIT** ‚Äî —ç—Ç–æ **Just-In-Time Compiler**,  
–∏–ª–∏ –ø–æ-—Ä—É—Å—Å–∫–∏ **"–∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –Ω–∞ –ª–µ—Ç—É"**.

**–ï–≥–æ –∑–∞–¥–∞—á–∞** ‚Äî **—É—Å–∫–æ—Ä–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ Java-–ø—Ä–æ–≥—Ä–∞–º–º**.

---

## üî• –ö—Ä–∞—Ç–∫–æ: –∑–∞—á–µ–º –Ω—É–∂–µ–Ω JIT?

–ö–æ–≥–¥–∞ —Ç—ã –∑–∞–ø—É—Å–∫–∞–µ—à—å Java-–ø—Ä–æ–≥—Ä–∞–º–º—É:

- –°–Ω–∞—á–∞–ª–∞ –∫–æ–¥ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –≤ **–±–∞–π—Ç–∫–æ–¥** (`.class` —Ñ–∞–π–ª—ã).
- –ë–∞–π—Ç–∫–æ–¥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞ **JVM** (Java Virtual Machine).
- –û–±—ã—á–Ω–æ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä **—á–∏—Ç–∞–µ—Ç –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç** –±–∞–π—Ç–∫–æ–¥ **–ø–æ—Å—Ç—Ä–æ—á–Ω–æ**.

**–ü—Ä–æ–±–ª–µ–º–∞**: –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è ‚Äî **–º–µ–¥–ª–µ–Ω–Ω–∞—è**.  
**–†–µ—à–µ–Ω–∏–µ**: —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —É—á–∞—Å—Ç–∫–∏ –∫–æ–¥–∞ –∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –≤ **–º–∞—à–∏–Ω–Ω—ã–π –∫–æ–¥**
–ø—Ä—è–º–æ **–≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã** ‚ûî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞–º–Ω–æ–≥–æ –±—ã—Å—Ç—Ä–µ–µ!

**–í–æ—Ç —ç—Ç–∏–º –∏ –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è JIT.**

---

# üõ† –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç JIT-–∫–æ–º–ø–∏–ª—è—Ç–æ—Ä:

1. –¢—ã –∑–∞–ø—É—Å–∫–∞–µ—à—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚ûî JVM –Ω–∞—á–∏–Ω–∞–µ—Ç –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å –±–∞–π—Ç–∫–æ–¥.
2. JVM **—Å–ª–µ–¥–∏—Ç**, –∫–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã —á–∞—Å—Ç–æ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è (**"–≥–æ—Ä—è—á–∏–µ –º–µ—Ç–æ–¥—ã"**).
3. –ö–æ–≥–¥–∞ –º–µ—Ç–æ–¥ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø–æ–ø—É–ª—è—Ä–Ω—ã–º:
    - JIT-–∫–æ–º–ø–∏–ª—è—Ç–æ—Ä **–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç –±–∞–π—Ç–∫–æ–¥ –≤ –Ω–∞—Ç–∏–≤–Ω—ã–π –∫–æ–¥ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ (CPU)**.
4. –¢–µ–ø–µ—Ä—å JVM **–±–æ–ª—å—à–µ –Ω–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ—Ç —ç—Ç–æ—Ç –º–µ—Ç–æ–¥**, –∞ **–∏—Å–ø–æ–ª–Ω—è–µ—Ç –µ–≥–æ –∫–∞–∫
   –æ–±—ã—á–Ω—ã–π –º–∞—à–∏–Ω–Ω—ã–π –∫–æ–¥** ‚ûî –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ!

---

## ‚ú® –ü—Ä–∏–º–µ—Ä:

```java
public class HelloWorld {
    public static void main(String[] args) {
        for (int i = 0; i < 1_000_000; i++) {
            sayHello();
        }
    }

    static void sayHello() {
        System.out.println("Hello");
    }
}
```

- –ú–µ—Ç–æ–¥ `sayHello()` **–æ—á–µ–Ω—å —á–∞—Å—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è**.
- JVM —ç—Ç–æ –∑–∞–º–µ—á–∞–µ—Ç ‚ûî **JIT –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç** `sayHello()` –≤ –º–∞—à–∏–Ω–Ω—ã–π –∫–æ–¥.
- –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –≤—ã–∑–æ–≤—ã —Ä–∞–±–æ—Ç–∞—é—Ç –±—ã—Å—Ç—Ä–µ–µ.

---

# üéØ –ö–∞–∫–∏–µ –µ—Å—Ç—å —Ä–µ–∂–∏–º—ã —É JIT?

| –†–µ–∂–∏–º  | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                |
|:-------|:----------------------------------------------------------------------------------------|
| Client | –ë—ã—Å—Ç—Ä–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è, –±–µ–∑ —Å–∏–ª—å–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å –∫–æ—Ä–æ—Ç–∫–æ–π –∂–∏–∑–Ω—å—é. |
| Server | –ú–µ–¥–ª–µ–Ω–Ω–∞—è, –Ω–æ –æ—á–µ–Ω—å –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞. –î–ª—è –¥–æ–ª–≥–æ–∂–∏–≤—É—â–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (–±—ç–∫–µ–Ω–¥).   |

(–°–µ–π—á–∞—Å –≤ Java –≤—Å–µ —É–º–Ω–µ–µ: –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≥–∏–±—Ä–∏–¥–Ω—ã–µ —Ä–µ–∂–∏–º—ã.)

---

# üß† –ö–∞–∫–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–µ–ª–∞–µ—Ç JIT?

‚úÖ –ò–Ω–ª–∞–π–Ω–∏–Ω–≥ –º–µ—Ç–æ–¥–æ–≤ (–≤—Å—Ç–∞–≤–∫–∞ —Ç–µ–ª–∞ –º–µ—Ç–æ–¥–∞ –ø—Ä—è–º–æ –≤ –∫–æ–¥)  
‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ–Ω—É–∂–Ω—ã—Ö `null`-–ø—Ä–æ–≤–µ—Ä–æ–∫)  
‚úÖ –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —Ü–∏–∫–ª–æ–≤ –∏ –≤–µ—Ç–≤–ª–µ–Ω–∏–π  
‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –º–µ—Ä—Ç–≤–æ–≥–æ –∫–æ–¥–∞ (–∫–æ—Ç–æ—Ä—ã–π –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª–Ω—è–µ—Ç—Å—è)  
‚úÖ Escape analysis (–µ—Å–ª–∏ –æ–±—ä–µ–∫—Ç –Ω–µ "—É–±–µ–≥–∞–µ—Ç" –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –º–µ—Ç–æ–¥–∞ ‚Äî —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä—è–º–æ
–≤ —Å—Ç–µ–∫–µ, –∞ –Ω–µ –≤ –∫—É—á–µ)

---

# üî• –ß—Ç–æ –µ—â–µ –≤–∞–∂–Ω–æ –∑–Ω–∞—Ç—å?

- **JIT —É–ª—É—á—à–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**, –Ω–æ **—Ä–∞–∑–≥–æ–Ω—è–µ—Ç—Å—è –Ω–µ —Å—Ä–∞–∑—É** ‚ûî  
  –≤ –Ω–∞—á–∞–ª–µ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –º–µ–¥–ª–µ–Ω–Ω–æ (–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è), –ø–æ—Ç–æ–º –±—ã—Å—Ç—Ä–æ (
  –ø–æ—Å–ª–µ JIT-–∫–æ–º–ø–∏–ª—è—Ü–∏–∏).
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –º–æ–∂–µ—Ç **–∞–¥–∞–ø—Ç–∏–≤–Ω–æ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞—Ç—å—Å—è**: –µ—Å–ª–∏ —É—Å–ª–æ–≤–∏—è
  –∏–∑–º–µ–Ω–∏–ª–∏—Å—å ‚ûî JIT –º–æ–∂–µ—Ç –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –ø–æ-–¥—Ä—É–≥–æ–º—É.

---

# üì¶ –í –¥–≤—É—Ö —Å–ª–æ–≤–∞—Ö:

| –ë–µ–∑ JIT                          | –° JIT                              |
|:---------------------------------|:-----------------------------------|
| –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –±–∞–π—Ç–∫–æ–¥–∞ | –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∞—à–∏–Ω–Ω–æ–≥–æ –∫–æ–¥–∞  |
| –ü–æ—Å—Ç—Ä–æ—á–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ            | –ö–æ–º–ø–∏–ª—è—Ü–∏—è "–≥–æ—Ä—è—á–µ–≥–æ" –∫–æ–¥–∞ –Ω–∞ –ª–µ—Ç—É |
| –ü—Ä–æ—Å—Ç–∞—è JVM                      | –£–º–Ω–∞—è –∏ –±—ã—Å—Ç—Ä–∞—è JVM                |

---

# üì¢ –ò—Ç–æ–≥–æ

- **JIT** ‚Äî —ç—Ç–æ —á–∞—Å—Ç—å JVM, –∫–æ—Ç–æ—Ä–∞—è **—É—Å–∫–æ—Ä—è–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º**.
- –û–Ω **–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–µ—Ç–æ–¥—ã** –≤ **–Ω–∞—Ç–∏–≤–Ω—ã–π –∫–æ–¥** –ø—Ä—è–º–æ –≤–æ –≤—Ä–µ–º—è
  —Ä–∞–±–æ—Ç—ã.
- –ë–ª–∞–≥–æ–¥–∞—Ä—è JIT, **Java-–ø—Ä–æ–≥—Ä–∞–º–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ—á—Ç–∏ —Ç–∞–∫ –∂–µ –±—ã—Å—Ç—Ä–æ**, –∫–∞–∫ C++
  –ø—Ä–æ–≥—Ä–∞–º–º—ã, –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ—Å–ª–µ "—Ä–∞–∑–≥–æ–Ω–∞".



